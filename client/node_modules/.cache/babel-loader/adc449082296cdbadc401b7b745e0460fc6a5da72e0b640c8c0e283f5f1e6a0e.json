{"ast":null,"code":"var _jsxFileName = \"D:\\\\BSTU\\\\Projects\\\\\\u0422\\u0420\\u0412\\u041F\\\\PurePawSome\\\\client\\\\src\\\\components\\\\breeds\\\\BreedReviews.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { io } from 'socket.io-client';\nimport { petsAPI } from '../../services/api';\nimport { useAuth } from '../../context/AuthContext';\nimport '../../styles/BreedReviews.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BreedReviews = ({\n  breedId\n}) => {\n  _s();\n  const {\n    currentUser\n  } = useAuth();\n  const [reviews, setReviews] = useState([]);\n  const [newReview, setNewReview] = useState('');\n  const [reviewPhotos, setReviewPhotos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [socket, setSocket] = useState(null);\n  const [reactions, setReactions] = useState({});\n  const [showReactionPicker, setShowReactionPicker] = useState(null);\n  const [reactionInput, setReactionInput] = useState('');\n  const [imageModalUrl, setImageModalUrl] = useState(null);\n  const [editingReviewId, setEditingReviewId] = useState(null);\n  const [editText, setEditText] = useState('');\n  const [editPhotos, setEditPhotos] = useState([]);\n  const [showReviewMenu, setShowReviewMenu] = useState(null);\n  const fileInputRef = useRef(null);\n  const editFileInputRef = useRef(null);\n  useEffect(() => {\n    if (!currentUser) return;\n    const token = localStorage.getItem('token');\n    if (!token) return;\n    const newSocket = io('http://localhost:5000', {\n      auth: {\n        token: token\n      }\n    });\n    newSocket.on('connect', () => {\n      console.log('–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ –æ—Ç–∑—ã–≤–∞–º');\n      newSocket.emit('join-breed-reviews', breedId);\n    });\n    newSocket.on('new-review', review => {\n      setReviews(prev => [...prev, review]);\n    });\n    newSocket.on('review-updated', updatedReview => {\n      setReviews(prev => prev.map(r => r.id === updatedReview.id ? updatedReview : r));\n    });\n    newSocket.on('review-deleted', data => {\n      setReviews(prev => prev.filter(r => r.id !== data.reviewId));\n    });\n    newSocket.on('review-reaction-updated', data => {\n      setReactions(prev => ({\n        ...prev,\n        [data.reviewId]: data.reactions\n      }));\n    });\n    setSocket(newSocket);\n    loadReviews();\n    return () => {\n      newSocket.emit('leave-breed-reviews', breedId);\n      newSocket.disconnect();\n    };\n  }, [breedId, currentUser]);\n  const loadReviews = async () => {\n    try {\n      const data = await petsAPI.getBreedReviews(breedId);\n      setReviews(data);\n      const reactionsData = {};\n      for (const review of data) {\n        try {\n          const reviewReactions = await petsAPI.getReviewReactions(review.id);\n          reactionsData[review.id] = reviewReactions;\n        } catch (error) {\n          console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ä–µ–∞–∫—Ü–∏–π –¥–ª—è –æ—Ç–∑—ã–≤–∞ ${review.id}:`, error);\n        }\n      }\n      setReactions(reactionsData);\n      setLoading(false);\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –æ—Ç–∑—ã–≤–æ–≤:', error);\n      setLoading(false);\n    }\n  };\n  const handlePhotoChange = async e => {\n    const files = Array.from(e.target.files);\n    if (files.length === 0) return;\n    try {\n      const uploadPromises = files.map(file => petsAPI.uploadFile(file));\n      const uploadedFiles = await Promise.all(uploadPromises);\n      setReviewPhotos(prev => [...prev, ...uploadedFiles]);\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:', error);\n    }\n  };\n  const handleSubmitReview = async e => {\n    e.preventDefault();\n    if (!newReview.trim() && reviewPhotos.length === 0 || !socket) return;\n    try {\n      const photosJson = reviewPhotos.length > 0 ? JSON.stringify(reviewPhotos.map(p => p.url)) : null;\n      socket.emit('create-review', {\n        breedId: breedId,\n        text: newReview.trim() || '',\n        photos: photosJson\n      });\n      setNewReview('');\n      setReviewPhotos([]);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–∑—ã–≤–∞:', error);\n    }\n  };\n  const handleToggleReaction = async (reviewId, reaction) => {\n    if (!socket || !currentUser) return;\n    try {\n      socket.emit('toggle-review-reaction', {\n        reviewId: reviewId,\n        reaction: reaction\n      });\n      setShowReactionPicker(null);\n      setReactionInput('');\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ä–µ–∞–∫—Ü–∏–∏:', error);\n    }\n  };\n  const parsePhotos = photosJson => {\n    if (!photosJson) return [];\n    try {\n      return JSON.parse(photosJson);\n    } catch {\n      return [];\n    }\n  };\n  const formatTime = dateString => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diff = now - date;\n    const seconds = Math.floor(diff / 1000);\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(diff / 3600000);\n    const days = Math.floor(diff / 86400000);\n    if (seconds < 10) return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';\n    if (seconds < 60) return `${seconds} —Å–µ–∫ –Ω–∞–∑–∞–¥`;\n    if (minutes < 60) return `${minutes} –º–∏–Ω –Ω–∞–∑–∞–¥`;\n    if (hours < 24) return `${hours} —á –Ω–∞–∑–∞–¥`;\n    if (days < 7) return `${days} –¥–Ω –Ω–∞–∑–∞–¥`;\n    return date.toLocaleDateString('ru-RU', {\n      day: 'numeric',\n      month: 'short',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  const hasUserReacted = (reviewId, reaction) => {\n    const reviewReactions = reactions[reviewId];\n    if (!reviewReactions || !reviewReactions[reaction]) return false;\n    return reviewReactions[reaction].some(user => user.id === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id));\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"breed-reviews-loading\",\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043E\\u0442\\u0437\\u044B\\u0432\\u043E\\u0432...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"breed-reviews\",\n    children: [currentUser ? /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"review-form\",\n      onSubmit: handleSubmitReview,\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"review-input\",\n        placeholder: \"\\u041D\\u0430\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u043E\\u0442\\u0437\\u044B\\u0432 \\u043E \\u043F\\u043E\\u0440\\u043E\\u0434\\u0435...\",\n        value: newReview,\n        onChange: e => setNewReview(e.target.value),\n        maxLength: 2000\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"review-form-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"attach-photos-btn\",\n          onClick: () => {\n            var _fileInputRef$current;\n            return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n          },\n          children: \"\\uD83D\\uDCF7 \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileInputRef,\n          type: \"file\",\n          multiple: true,\n          accept: \"image/*\",\n          style: {\n            display: 'none'\n          },\n          onChange: handlePhotoChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 25\n        }, this), reviewPhotos.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"review-photos-preview\",\n          children: reviewPhotos.map((photo, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"photo-preview\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: photo.url.startsWith('http') ? photo.url : `http://localhost:5000${photo.url}`,\n              alt: \"Preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setReviewPhotos(prev => prev.filter((_, i) => i !== index)),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 41\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 37\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submit-review-btn\",\n          disabled: !newReview.trim() && reviewPhotos.length === 0 || !socket,\n          children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"review-login-prompt\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0412\\u043E\\u0439\\u0434\\u0438\\u0442\\u0435, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043E\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reviews-list\",\n      children: reviews.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reviews-empty\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442 \\u043E\\u0442\\u0437\\u044B\\u0432\\u043E\\u0432. \\u0411\\u0443\\u0434\\u044C\\u0442\\u0435 \\u043F\\u0435\\u0440\\u0432\\u044B\\u043C!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 21\n      }, this) : reviews.map(review => {\n        const reviewPhotosList = parsePhotos(review.photos);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"review-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-header\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-author-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"review-avatar\",\n                children: review.user.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: review.user.avatar.startsWith('http') ? review.user.avatar : `http://localhost:5000${review.user.avatar}`,\n                  alt: review.user.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 49\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"avatar-placeholder\",\n                  children: review.user.name.charAt(0).toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"review-author-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"review-author\",\n                  children: review.user.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"review-time\",\n                  children: formatTime(review.createdat)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 33\n          }, this), review.text && review.text.trim().length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-text\",\n            children: review.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 37\n          }, this), reviewPhotosList.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-photos\",\n            children: reviewPhotosList.map((photoUrl, index) => /*#__PURE__*/_jsxDEV(\"img\", {\n              src: photoUrl.startsWith('http') ? photoUrl : `http://localhost:5000${photoUrl}`,\n              alt: `–§–æ—Ç–æ ${index + 1}`,\n              onClick: () => setImageModalUrl(photoUrl.startsWith('http') ? photoUrl : `http://localhost:5000${photoUrl}`)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 45\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 37\n          }, this), reactions[review.id] && Object.keys(reactions[review.id]).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-reactions\",\n            children: Object.entries(reactions[review.id]).map(([reaction, users]) => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `reaction-button ${hasUserReacted(review.id, reaction) ? 'reacted' : ''}`,\n              onClick: () => handleToggleReaction(review.id, reaction),\n              title: users.map(u => u.name).join(', '),\n              children: [reaction.startsWith('data:image') || reaction.startsWith('http') ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: reaction,\n                alt: \"reaction\",\n                className: \"reaction-image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 53\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"reaction-emoji\",\n                children: reaction\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"reaction-count\",\n                children: users.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 49\n              }, this)]\n            }, reaction, true, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 45\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 37\n          }, this), currentUser && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-reaction-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"add-reaction-btn\",\n              onClick: () => setShowReactionPicker(showReactionPicker === review.id ? null : review.id),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 45\n              }, this), \" \\u0420\\u0435\\u0430\\u043A\\u0446\\u0438\\u044F\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 41\n            }, this), showReactionPicker === review.id && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reaction-picker\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"reaction-picker-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"URL \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"\\u0412\\u0441\\u0442\\u0430\\u0432\\u044C\\u0442\\u0435 URL \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\",\n                  value: reactionInput,\n                  onChange: e => setReactionInput(e.target.value),\n                  onKeyPress: e => {\n                    if (e.key === 'Enter') {\n                      if (reactionInput.trim()) {\n                        handleToggleReaction(review.id, reactionInput.trim());\n                      }\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    if (reactionInput.trim()) {\n                      handleToggleReaction(review.id, reactionInput.trim());\n                    }\n                  },\n                  disabled: !reactionInput.trim(),\n                  children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"reaction-picker-divider\",\n                children: \"\\u0438\\u043B\\u0438\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"reaction-picker-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"\\u0411\\u044B\\u0441\\u0442\\u0440\\u044B\\u0435 \\u044D\\u043C\\u043E\\u0434\\u0437\\u0438:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"quick-reactions\",\n                  children: ['üëç', '‚ù§Ô∏è', 'üòÇ', 'üòä', 'üòÆ', 'üò¢', 'üéâ', 'üî•'].map(emoji => /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"quick-reaction-btn\",\n                    onClick: () => handleToggleReaction(review.id, emoji),\n                    children: emoji\n                  }, emoji, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 355,\n                    columnNumber: 61\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 49\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 37\n          }, this)]\n        }, review.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 29\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }, this), imageModalUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"review-image-modal\",\n      onClick: () => setImageModalUrl(null),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"review-image-modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"review-image-modal-close\",\n          onClick: () => setImageModalUrl(null),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: imageModalUrl,\n          alt: \"\\u041F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 183,\n    columnNumber: 9\n  }, this);\n};\n_s(BreedReviews, \"afCcY2mgwmB2YpZV38Cg87Vg4XY=\", false, function () {\n  return [useAuth];\n});\n_c = BreedReviews;\nexport default BreedReviews;\nvar _c;\n$RefreshReg$(_c, \"BreedReviews\");","map":{"version":3,"names":["React","useState","useEffect","useRef","io","petsAPI","useAuth","jsxDEV","_jsxDEV","BreedReviews","breedId","_s","currentUser","reviews","setReviews","newReview","setNewReview","reviewPhotos","setReviewPhotos","loading","setLoading","socket","setSocket","reactions","setReactions","showReactionPicker","setShowReactionPicker","reactionInput","setReactionInput","imageModalUrl","setImageModalUrl","editingReviewId","setEditingReviewId","editText","setEditText","editPhotos","setEditPhotos","showReviewMenu","setShowReviewMenu","fileInputRef","editFileInputRef","token","localStorage","getItem","newSocket","auth","on","console","log","emit","review","prev","updatedReview","map","r","id","data","filter","reviewId","loadReviews","disconnect","getBreedReviews","reactionsData","reviewReactions","getReviewReactions","error","handlePhotoChange","e","files","Array","from","target","length","uploadPromises","file","uploadFile","uploadedFiles","Promise","all","handleSubmitReview","preventDefault","trim","photosJson","JSON","stringify","p","url","text","photos","current","value","handleToggleReaction","reaction","parsePhotos","parse","formatTime","dateString","date","Date","now","diff","seconds","Math","floor","minutes","hours","days","toLocaleDateString","day","month","hour","minute","hasUserReacted","some","user","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","placeholder","onChange","maxLength","type","onClick","_fileInputRef$current","click","ref","multiple","accept","style","display","photo","index","src","startsWith","alt","_","i","disabled","reviewPhotosList","avatar","name","charAt","toUpperCase","createdat","photoUrl","Object","keys","entries","users","title","u","join","onKeyPress","key","emoji","stopPropagation","_c","$RefreshReg$"],"sources":["D:/BSTU/Projects/–¢–†–í–ü/PurePawSome/client/src/components/breeds/BreedReviews.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport { petsAPI } from '../../services/api';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport '../../styles/BreedReviews.css';\r\n\r\nconst BreedReviews = ({ breedId }) => {\r\n    const { currentUser } = useAuth();\r\n    const [reviews, setReviews] = useState([]);\r\n    const [newReview, setNewReview] = useState('');\r\n    const [reviewPhotos, setReviewPhotos] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [socket, setSocket] = useState(null);\r\n    const [reactions, setReactions] = useState({});\r\n    const [showReactionPicker, setShowReactionPicker] = useState(null);\r\n    const [reactionInput, setReactionInput] = useState('');\r\n    const [imageModalUrl, setImageModalUrl] = useState(null);\r\n    const [editingReviewId, setEditingReviewId] = useState(null);\r\n    const [editText, setEditText] = useState('');\r\n    const [editPhotos, setEditPhotos] = useState([]);\r\n    const [showReviewMenu, setShowReviewMenu] = useState(null);\r\n    const fileInputRef = useRef(null);\r\n    const editFileInputRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (!currentUser) return;\r\n\r\n        const token = localStorage.getItem('token');\r\n        if (!token) return;\r\n\r\n        const newSocket = io('http://localhost:5000', {\r\n            auth: { token: token }\r\n        });\r\n\r\n        newSocket.on('connect', () => {\r\n            console.log('–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ –æ—Ç–∑—ã–≤–∞–º');\r\n            newSocket.emit('join-breed-reviews', breedId);\r\n        });\r\n\r\n        newSocket.on('new-review', (review) => {\r\n            setReviews(prev => [...prev, review]);\r\n        });\r\n\r\n        newSocket.on('review-updated', (updatedReview) => {\r\n            setReviews(prev => prev.map(r => r.id === updatedReview.id ? updatedReview : r));\r\n        });\r\n\r\n        newSocket.on('review-deleted', (data) => {\r\n            setReviews(prev => prev.filter(r => r.id !== data.reviewId));\r\n        });\r\n\r\n        newSocket.on('review-reaction-updated', (data) => {\r\n            setReactions(prev => ({\r\n                ...prev,\r\n                [data.reviewId]: data.reactions\r\n            }));\r\n        });\r\n\r\n        setSocket(newSocket);\r\n        loadReviews();\r\n\r\n        return () => {\r\n            newSocket.emit('leave-breed-reviews', breedId);\r\n            newSocket.disconnect();\r\n        };\r\n    }, [breedId, currentUser]);\r\n\r\n    const loadReviews = async () => {\r\n        try {\r\n            const data = await petsAPI.getBreedReviews(breedId);\r\n            setReviews(data);\r\n            \r\n            const reactionsData = {};\r\n            for (const review of data) {\r\n                try {\r\n                    const reviewReactions = await petsAPI.getReviewReactions(review.id);\r\n                    reactionsData[review.id] = reviewReactions;\r\n                } catch (error) {\r\n                    console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ä–µ–∞–∫—Ü–∏–π –¥–ª—è –æ—Ç–∑—ã–≤–∞ ${review.id}:`, error);\r\n                }\r\n            }\r\n            setReactions(reactionsData);\r\n            \r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –æ—Ç–∑—ã–≤–æ–≤:', error);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handlePhotoChange = async (e) => {\r\n        const files = Array.from(e.target.files);\r\n        if (files.length === 0) return;\r\n\r\n        try {\r\n            const uploadPromises = files.map(file => petsAPI.uploadFile(file));\r\n            const uploadedFiles = await Promise.all(uploadPromises);\r\n            setReviewPhotos(prev => [...prev, ...uploadedFiles]);\r\n        } catch (error) {\r\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:', error);\r\n        }\r\n    };\r\n\r\n    const handleSubmitReview = async (e) => {\r\n        e.preventDefault();\r\n        if ((!newReview.trim() && reviewPhotos.length === 0) || !socket) return;\r\n\r\n        try {\r\n            const photosJson = reviewPhotos.length > 0 ? JSON.stringify(reviewPhotos.map(p => p.url)) : null;\r\n            socket.emit('create-review', {\r\n                breedId: breedId,\r\n                text: newReview.trim() || '',\r\n                photos: photosJson\r\n            });\r\n            setNewReview('');\r\n            setReviewPhotos([]);\r\n            if (fileInputRef.current) {\r\n                fileInputRef.current.value = '';\r\n            }\r\n        } catch (error) {\r\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–∑—ã–≤–∞:', error);\r\n        }\r\n    };\r\n\r\n    const handleToggleReaction = async (reviewId, reaction) => {\r\n        if (!socket || !currentUser) return;\r\n\r\n        try {\r\n            socket.emit('toggle-review-reaction', {\r\n                reviewId: reviewId,\r\n                reaction: reaction\r\n            });\r\n            setShowReactionPicker(null);\r\n            setReactionInput('');\r\n        } catch (error) {\r\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ä–µ–∞–∫—Ü–∏–∏:', error);\r\n        }\r\n    };\r\n\r\n    const parsePhotos = (photosJson) => {\r\n        if (!photosJson) return [];\r\n        try {\r\n            return JSON.parse(photosJson);\r\n        } catch {\r\n            return [];\r\n        }\r\n    };\r\n\r\n    const formatTime = (dateString) => {\r\n        const date = new Date(dateString);\r\n        const now = new Date();\r\n        const diff = now - date;\r\n        const seconds = Math.floor(diff / 1000);\r\n        const minutes = Math.floor(diff / 60000);\r\n        const hours = Math.floor(diff / 3600000);\r\n        const days = Math.floor(diff / 86400000);\r\n\r\n        if (seconds < 10) return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';\r\n        if (seconds < 60) return `${seconds} —Å–µ–∫ –Ω–∞–∑–∞–¥`;\r\n        if (minutes < 60) return `${minutes} –º–∏–Ω –Ω–∞–∑–∞–¥`;\r\n        if (hours < 24) return `${hours} —á –Ω–∞–∑–∞–¥`;\r\n        if (days < 7) return `${days} –¥–Ω –Ω–∞–∑–∞–¥`;\r\n        \r\n        return date.toLocaleDateString('ru-RU', {\r\n            day: 'numeric',\r\n            month: 'short',\r\n            hour: '2-digit',\r\n            minute: '2-digit'\r\n        });\r\n    };\r\n\r\n    const hasUserReacted = (reviewId, reaction) => {\r\n        const reviewReactions = reactions[reviewId];\r\n        if (!reviewReactions || !reviewReactions[reaction]) return false;\r\n        return reviewReactions[reaction].some(user => user.id === currentUser?.id);\r\n    };\r\n\r\n    if (loading) {\r\n        return <div className=\"breed-reviews-loading\">–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–∑—ã–≤–æ–≤...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"breed-reviews\">\r\n            {currentUser ? (\r\n                <form className=\"review-form\" onSubmit={handleSubmitReview}>\r\n                    <textarea\r\n                        className=\"review-input\"\r\n                        placeholder=\"–ù–∞–ø–∏—à–∏—Ç–µ –æ—Ç–∑—ã–≤ –æ –ø–æ—Ä–æ–¥–µ...\"\r\n                        value={newReview}\r\n                        onChange={(e) => setNewReview(e.target.value)}\r\n                        maxLength={2000}\r\n                    />\r\n                    <div className=\"review-form-actions\">\r\n                        <button\r\n                            type=\"button\"\r\n                            className=\"attach-photos-btn\"\r\n                            onClick={() => fileInputRef.current?.click()}\r\n                        >\r\n                            üì∑ –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ\r\n                        </button>\r\n                        <input\r\n                            ref={fileInputRef}\r\n                            type=\"file\"\r\n                            multiple\r\n                            accept=\"image/*\"\r\n                            style={{ display: 'none' }}\r\n                            onChange={handlePhotoChange}\r\n                        />\r\n                        {reviewPhotos.length > 0 && (\r\n                            <div className=\"review-photos-preview\">\r\n                                {reviewPhotos.map((photo, index) => (\r\n                                    <div key={index} className=\"photo-preview\">\r\n                                        <img src={photo.url.startsWith('http') ? photo.url : `http://localhost:5000${photo.url}`} alt=\"Preview\" />\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            onClick={() => setReviewPhotos(prev => prev.filter((_, i) => i !== index))}\r\n                                        >\r\n                                            √ó\r\n                                        </button>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                        <button\r\n                            type=\"submit\"\r\n                            className=\"submit-review-btn\"\r\n                            disabled={(!newReview.trim() && reviewPhotos.length === 0) || !socket}\r\n                        >\r\n                            –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            ) : (\r\n                <div className=\"review-login-prompt\">\r\n                    <p>–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</p>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"reviews-list\">\r\n                {reviews.length === 0 ? (\r\n                    <div className=\"reviews-empty\">\r\n                        <p>–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>\r\n                    </div>\r\n                ) : (\r\n                    reviews.map((review) => {\r\n                        const reviewPhotosList = parsePhotos(review.photos);\r\n                        return (\r\n                            <div key={review.id} className=\"review-item\">\r\n                                <div className=\"review-header\">\r\n                                    <div className=\"review-author-info\">\r\n                                        <div className=\"review-avatar\">\r\n                                            {review.user.avatar ? (\r\n                                                <img\r\n                                                    src={review.user.avatar.startsWith('http') \r\n                                                        ? review.user.avatar \r\n                                                        : `http://localhost:5000${review.user.avatar}`}\r\n                                                    alt={review.user.name}\r\n                                                />\r\n                                            ) : (\r\n                                                <div className=\"avatar-placeholder\">\r\n                                                    {review.user.name.charAt(0).toUpperCase()}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"review-author-details\">\r\n                                            <span className=\"review-author\">{review.user.name}</span>\r\n                                            <span className=\"review-time\">{formatTime(review.createdat)}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                {review.text && review.text.trim().length > 0 && (\r\n                                    <div className=\"review-text\">{review.text}</div>\r\n                                )}\r\n                                {reviewPhotosList.length > 0 && (\r\n                                    <div className=\"review-photos\">\r\n                                        {reviewPhotosList.map((photoUrl, index) => (\r\n                                            <img\r\n                                                key={index}\r\n                                                src={photoUrl.startsWith('http') ? photoUrl : `http://localhost:5000${photoUrl}`}\r\n                                                alt={`–§–æ—Ç–æ ${index + 1}`}\r\n                                                onClick={() => setImageModalUrl(photoUrl.startsWith('http') ? photoUrl : `http://localhost:5000${photoUrl}`)}\r\n                                            />\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                                \r\n                                {/* –†–µ–∞–∫—Ü–∏–∏ */}\r\n                                {reactions[review.id] && Object.keys(reactions[review.id]).length > 0 && (\r\n                                    <div className=\"review-reactions\">\r\n                                        {Object.entries(reactions[review.id]).map(([reaction, users]) => (\r\n                                            <button\r\n                                                key={reaction}\r\n                                                className={`reaction-button ${\r\n                                                    hasUserReacted(review.id, reaction) ? 'reacted' : ''\r\n                                                }`}\r\n                                                onClick={() => handleToggleReaction(review.id, reaction)}\r\n                                                title={users.map(u => u.name).join(', ')}\r\n                                            >\r\n                                                {reaction.startsWith('data:image') || reaction.startsWith('http') ? (\r\n                                                    <img src={reaction} alt=\"reaction\" className=\"reaction-image\" />\r\n                                                ) : (\r\n                                                    <span className=\"reaction-emoji\">{reaction}</span>\r\n                                                )}\r\n                                                <span className=\"reaction-count\">{users.length}</span>\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∞–∫—Ü–∏–∏ */}\r\n                                {currentUser && (\r\n                                    <div className=\"review-reaction-controls\">\r\n                                        <button\r\n                                            className=\"add-reaction-btn\"\r\n                                            onClick={() => setShowReactionPicker(\r\n                                                showReactionPicker === review.id ? null : review.id\r\n                                            )}\r\n                                        >\r\n                                            <span>+</span> –†–µ–∞–∫—Ü–∏—è\r\n                                        </button>\r\n                                        \r\n                                        {showReactionPicker === review.id && (\r\n                                            <div className=\"reaction-picker\">\r\n                                                <div className=\"reaction-picker-section\">\r\n                                                    <label>URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</label>\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        placeholder=\"–í—Å—Ç–∞–≤—å—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è\"\r\n                                                        value={reactionInput}\r\n                                                        onChange={(e) => setReactionInput(e.target.value)}\r\n                                                        onKeyPress={(e) => {\r\n                                                            if (e.key === 'Enter') {\r\n                                                                if (reactionInput.trim()) {\r\n                                                                    handleToggleReaction(review.id, reactionInput.trim());\r\n                                                                }\r\n                                                            }\r\n                                                        }}\r\n                                                    />\r\n                                                    <button\r\n                                                        onClick={() => {\r\n                                                            if (reactionInput.trim()) {\r\n                                                                handleToggleReaction(review.id, reactionInput.trim());\r\n                                                            }\r\n                                                        }}\r\n                                                        disabled={!reactionInput.trim()}\r\n                                                    >\r\n                                                        –î–æ–±–∞–≤–∏—Ç—å\r\n                                                    </button>\r\n                                                </div>\r\n                                                <div className=\"reaction-picker-divider\">–∏–ª–∏</div>\r\n                                                <div className=\"reaction-picker-section\">\r\n                                                    <label>–ë—ã—Å—Ç—Ä—ã–µ —ç–º–æ–¥–∑–∏:</label>\r\n                                                    <div className=\"quick-reactions\">\r\n                                                        {['üëç', '‚ù§Ô∏è', 'üòÇ', 'üòä', 'üòÆ', 'üò¢', 'üéâ', 'üî•'].map(emoji => (\r\n                                                            <button\r\n                                                                key={emoji}\r\n                                                                className=\"quick-reaction-btn\"\r\n                                                                onClick={() => handleToggleReaction(review.id, emoji)}\r\n                                                            >\r\n                                                                {emoji}\r\n                                                            </button>\r\n                                                        ))}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    })\r\n                )}\r\n            </div>\r\n\r\n            {imageModalUrl && (\r\n                <div className=\"review-image-modal\" onClick={() => setImageModalUrl(null)}>\r\n                    <div className=\"review-image-modal-content\" onClick={(e) => e.stopPropagation()}>\r\n                        <button\r\n                            className=\"review-image-modal-close\"\r\n                            onClick={() => setImageModalUrl(null)}\r\n                        >\r\n                            √ó\r\n                        </button>\r\n                        <img src={imageModalUrl} alt=\"–ü—Ä–æ—Å–º–æ—Ç—Ä\" />\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BreedReviews;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}