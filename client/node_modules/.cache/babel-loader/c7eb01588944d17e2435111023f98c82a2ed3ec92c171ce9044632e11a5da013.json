{"ast":null,"code":"var _jsxFileName = \"D:\\\\BSTU\\\\Projects\\\\\\u0422\\u0420\\u0412\\u041F\\\\PurePawSome\\\\client\\\\src\\\\components\\\\breeds\\\\BreedReviews.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { io } from 'socket.io-client';\nimport { petsAPI } from '../../services/api';\nimport { useAuth } from '../../context/AuthContext';\nimport '../../styles/BreedReviews.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BreedReviews = ({\n  breedId\n}) => {\n  _s();\n  const {\n    currentUser\n  } = useAuth();\n  const [reviews, setReviews] = useState([]);\n  const [newReview, setNewReview] = useState('');\n  const [reviewPhotos, setReviewPhotos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [socket, setSocket] = useState(null);\n  const [reactions, setReactions] = useState({});\n  const [showReactionPicker, setShowReactionPicker] = useState(null);\n  const [reactionInput, setReactionInput] = useState('');\n  const [imageModalUrl, setImageModalUrl] = useState(null);\n  const [editingReviewId, setEditingReviewId] = useState(null);\n  const [editText, setEditText] = useState('');\n  const [editPhotos, setEditPhotos] = useState([]);\n  const [showReviewMenu, setShowReviewMenu] = useState(null);\n  const fileInputRef = useRef(null);\n  const editFileInputRef = useRef(null);\n  useEffect(() => {\n    if (!currentUser) return;\n    const token = localStorage.getItem('token');\n    if (!token) return;\n    const newSocket = io('http://localhost:5000', {\n      auth: {\n        token: token\n      }\n    });\n    newSocket.on('connect', () => {\n      console.log('쮏얧쥃혩혢햣햫 햨 쮐향혦쒫썛');\n      newSocket.emit('join-breed-reviews', breedId);\n    });\n    newSocket.on('new-review', review => {\n      setReviews(prev => [...prev, review]);\n    });\n    newSocket.on('review-updated', updatedReview => {\n      setReviews(prev => prev.map(r => r.id === updatedReview.id ? updatedReview : r));\n    });\n    newSocket.on('review-deleted', data => {\n      setReviews(prev => prev.filter(r => r.id !== data.reviewId));\n    });\n    newSocket.on('review-reaction-updated', data => {\n      setReactions(prev => ({\n        ...prev,\n        [data.reviewId]: data.reactions\n      }));\n    });\n    setSocket(newSocket);\n    loadReviews();\n    return () => {\n      newSocket.emit('leave-breed-reviews', breedId);\n      newSocket.disconnect();\n    };\n  }, [breedId, currentUser]);\n  const loadReviews = async () => {\n    try {\n      const data = await petsAPI.getBreedReviews(breedId);\n      setReviews(data);\n      const reactionsData = {};\n      for (const review of data) {\n        try {\n          const reviewReactions = await petsAPI.getReviewReactions(review.id);\n          reactionsData[review.id] = reviewReactions;\n        } catch (error) {\n          console.error(`뤰걣쟳쐃쥃 햦 향햟햡혞향햨햣 햣햟햨혡햦햧 햢햩혪 쮐향혦쒫 ${review.id}:`, error);\n        }\n      }\n      setReactions(reactionsData);\n      setLoading(false);\n    } catch (error) {\n      console.error('뤰걣쟳쐃쥃 햦 향햟햡혞향햨햣 쮐향혦쒫쮏:', error);\n      setLoading(false);\n    }\n  };\n  const handlePhotoChange = async e => {\n    const files = Array.from(e.target.files);\n    if (files.length === 0) return;\n    try {\n      const uploadPromises = files.map(file => petsAPI.uploadFile(file));\n      const uploadedFiles = await Promise.all(uploadPromises);\n      setReviewPhotos(prev => [...prev, ...uploadedFiles]);\n    } catch (error) {\n      console.error('뤰걣쟳쐃쥃 햦 향햟햡혞향햨햣 혟쮐쮏햟혟햦햧:', error);\n    }\n  };\n  const handleSubmitReview = async e => {\n    e.preventDefault();\n    if (!newReview.trim() && reviewPhotos.length === 0 || !socket) return;\n    try {\n      const photosJson = reviewPhotos.length > 0 ? JSON.stringify(reviewPhotos.map(p => p.url)) : null;\n      socket.emit('create-review', {\n        breedId: breedId,\n        text: newReview.trim() || '',\n        photos: photosJson\n      });\n      setNewReview('');\n      setReviewPhotos([]);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (error) {\n      console.error('뤰걣쟳쐃쥃 햦 쮐햟쒫쥃 쮐향혦쒫:', error);\n    }\n  };\n  const handleToggleReaction = async (reviewId, reaction) => {\n    if (!socket || !currentUser) return;\n    try {\n      socket.emit('toggle-review-reaction', {\n        reviewId: reviewId,\n        reaction: reaction\n      });\n      setShowReactionPicker(null);\n      setReactionInput('');\n    } catch (error) {\n      console.error('뤰걣쟳쐃쥃 햦 쮐햟쒫쥃 햣햟햨혡햦햦:', error);\n    }\n  };\n  const parsePhotos = photosJson => {\n    if (!photosJson) return [];\n    try {\n      return JSON.parse(photosJson);\n    } catch {\n      return [];\n    }\n  };\n  const formatTime = dateString => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diff = now - date;\n    const seconds = Math.floor(diff / 1000);\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(diff / 3600000);\n    const days = Math.floor(diff / 86400000);\n    if (seconds < 10) return '혝쮏혧햨 혢혝';\n    if (seconds < 60) return `${seconds} 혜햣햨 햫햟향햟햢`;\n    if (minutes < 60) return `${minutes} 햪햦햫 햫햟향햟햢`;\n    if (hours < 24) return `${hours} 혢 햫햟향햟햢`;\n    if (days < 7) return `${days} 햢햫 햫햟향햟햢`;\n    return date.toLocaleDateString('ru-RU', {\n      day: 'numeric',\n      month: 'short',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  const hasUserReacted = (reviewId, reaction) => {\n    const reviewReactions = reactions[reviewId];\n    if (!reviewReactions || !reviewReactions[reaction]) return false;\n    return reviewReactions[reaction].some(user => user.id === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id));\n  };\n  const hasUserReactedToMessage = reviewId => {\n    const reviewReactions = reactions[reviewId];\n    if (!reviewReactions) return false;\n    return Object.values(reviewReactions).some(users => users.some(user => user.id === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)));\n  };\n  const handleStartEdit = review => {\n    setEditingReviewId(review.id);\n    setEditText(review.text || '');\n    const photosList = parsePhotos(review.photos);\n    setEditPhotos(photosList.map(url => ({\n      url\n    })));\n    setShowReviewMenu(null);\n  };\n  const handleCancelEdit = () => {\n    setEditingReviewId(null);\n    setEditText('');\n    setEditPhotos([]);\n  };\n  const handleSaveEdit = async reviewId => {\n    if (!editText.trim() && editPhotos.length === 0 || !socket) return;\n    try {\n      const photosJson = editPhotos.length > 0 ? JSON.stringify(editPhotos.map(p => p.url)) : null;\n      socket.emit('update-review', {\n        reviewId: reviewId,\n        text: editText.trim() || '',\n        photos: photosJson\n      });\n      setEditingReviewId(null);\n      setEditText('');\n      setEditPhotos([]);\n    } catch (error) {\n      console.error('뤰걣쟳쐃쥃 햦 햣햢햟햨혝햦쮏쒫썛쫧쟳 쮐향혦쒫:', error);\n    }\n  };\n  const handleDeleteReview = async reviewId => {\n    if (!window.confirm('뉌 혞쒫왐햣햫혦, 혢혝 혠쮐햦혝햣 혞햢햟햩햦혝혧 혨혝쮐 쮐향혦?')) {\n      return;\n    }\n    if (!socket) return;\n    try {\n      socket.emit('delete-review', {\n        reviewId: reviewId\n      });\n      setShowReviewMenu(null);\n    } catch (error) {\n      console.error('뤰걣쟳쐃쥃 햦 혞햢햟햩햣햫햦햦 쮐향혦쒫:', error);\n    }\n  };\n  const handleEditPhotoChange = async e => {\n    const files = Array.from(e.target.files);\n    if (files.length === 0) return;\n    try {\n      const uploadPromises = files.map(file => petsAPI.uploadFile(file));\n      const uploadedFiles = await Promise.all(uploadPromises);\n      setEditPhotos(prev => [...prev, ...uploadedFiles]);\n    } catch (error) {\n      console.error('뤰걣쟳쐃쥃 햦 향햟햡혞향햨햣 혟쮐쮏햟혟햦햧:', error);\n    }\n  };\n\n  // 행햟햨혦혝햦햣 햪햣햫혩 햦 햨햩햦햨햣 쒫쫧 햣햡쬪n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (showReviewMenu && !event.target.closest('.review-actions-wrapper')) {\n        setShowReviewMenu(null);\n      }\n      if (showReactionPicker && !event.target.closest('.review-reaction-controls')) {\n        setShowReactionPicker(null);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showReviewMenu, showReactionPicker]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"breed-reviews-loading\",\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043E\\u0442\\u0437\\u044B\\u0432\\u043E\\u0432...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"breed-reviews\",\n    children: [currentUser ? /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"review-form\",\n      onSubmit: handleSubmitReview,\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"review-input\",\n        placeholder: \"\\u041D\\u0430\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u043E\\u0442\\u0437\\u044B\\u0432 \\u043E \\u043F\\u043E\\u0440\\u043E\\u0434\\u0435...\",\n        value: newReview,\n        onChange: e => setNewReview(e.target.value),\n        maxLength: 2000\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"review-form-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"attach-photos-btn\",\n          onClick: () => {\n            var _fileInputRef$current;\n            return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n          },\n          children: \"\\uD83D\\uDCF7 \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileInputRef,\n          type: \"file\",\n          multiple: true,\n          accept: \"image/*\",\n          style: {\n            display: 'none'\n          },\n          onChange: handlePhotoChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 25\n        }, this), reviewPhotos.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"review-photos-preview\",\n          children: reviewPhotos.map((photo, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"photo-preview\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: photo.url.startsWith('http') ? photo.url : `http://localhost:5000${photo.url}`,\n              alt: \"Preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setReviewPhotos(prev => prev.filter((_, i) => i !== index)),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 41\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 37\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submit-review-btn\",\n          disabled: !newReview.trim() && reviewPhotos.length === 0 || !socket,\n          children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"review-login-prompt\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0412\\u043E\\u0439\\u0434\\u0438\\u0442\\u0435, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043E\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reviews-list\",\n      children: reviews.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reviews-empty\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442 \\u043E\\u0442\\u0437\\u044B\\u0432\\u043E\\u0432. \\u0411\\u0443\\u0434\\u044C\\u0442\\u0435 \\u043F\\u0435\\u0440\\u0432\\u044B\\u043C!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 21\n      }, this) : reviews.map(review => {\n        const reviewPhotosList = parsePhotos(review.photos);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"review-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-author-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"review-avatar\",\n                children: review.user.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: review.user.avatar.startsWith('http') ? review.user.avatar : `http://localhost:5000${review.user.avatar}`,\n                  alt: review.user.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 49\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"avatar-placeholder\",\n                  children: review.user.name.charAt(0).toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"review-author-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"review-author\",\n                  children: review.user.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"review-time\",\n                  children: formatTime(review.createdat)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 37\n            }, this), review.user.id === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-actions-wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"review-menu-btn\",\n                onClick: e => {\n                  e.stopPropagation();\n                  setShowReviewMenu(showReviewMenu === review.id ? null : review.id);\n                },\n                title: \"\\u041C\\u0435\\u043D\\u044E \\u043E\\u0442\\u0437\\u044B\\u0432\\u0430\",\n                children: \"\\u22EE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 45\n              }, this), showReviewMenu === review.id && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"review-menu-dropdown\",\n                onClick: e => e.stopPropagation(),\n                children: editingReviewId === review.id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"review-menu-item\",\n                    onClick: () => {\n                      handleSaveEdit(review.id);\n                      setShowReviewMenu(null);\n                    },\n                    children: \"\\u2713 \\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 373,\n                    columnNumber: 61\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"review-menu-item\",\n                    onClick: () => {\n                      handleCancelEdit();\n                      setShowReviewMenu(null);\n                    },\n                    children: \"\\xD7 \\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 382,\n                    columnNumber: 61\n                  }, this)]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"review-menu-item\",\n                    onClick: () => {\n                      handleStartEdit(review);\n                    },\n                    children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 394,\n                    columnNumber: 61\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"review-menu-item\",\n                    onClick: () => {\n                      handleDeleteReview(review.id);\n                    },\n                    children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 402,\n                    columnNumber: 61\n                  }, this)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 49\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 33\n          }, this), editingReviewId === review.id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"review-edit-input\",\n              value: editText,\n              onChange: e => setEditText(e.target.value),\n              onKeyDown: e => {\n                if (e.key === 'Enter' && e.ctrlKey) {\n                  handleSaveEdit(review.id);\n                } else if (e.key === 'Escape') {\n                  handleCancelEdit();\n                }\n              },\n              maxLength: 2000,\n              autoFocus: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-form-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"attach-photos-btn\",\n                onClick: () => {\n                  var _editFileInputRef$cur;\n                  return (_editFileInputRef$cur = editFileInputRef.current) === null || _editFileInputRef$cur === void 0 ? void 0 : _editFileInputRef$cur.click();\n                },\n                children: \"\\uD83D\\uDCF7 \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                ref: editFileInputRef,\n                type: \"file\",\n                multiple: true,\n                accept: \"image/*\",\n                style: {\n                  display: 'none'\n                },\n                onChange: handleEditPhotoChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 45\n              }, this), editPhotos.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"review-photos-preview\",\n                children: editPhotos.map((photo, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"photo-preview\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: photo.url.startsWith('http') ? photo.url : `http://localhost:5000${photo.url}`,\n                    alt: \"Preview\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 453,\n                    columnNumber: 61\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => setEditPhotos(prev => prev.filter((_, i) => i !== index)),\n                    children: \"\\xD7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 454,\n                    columnNumber: 61\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 57\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 49\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: review.text && review.text.trim().length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-text\",\n              children: review.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 45\n            }, this)\n          }, void 0, false), editingReviewId !== review.id && reviewPhotosList.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-photos\",\n            children: reviewPhotosList.map((photoUrl, index) => /*#__PURE__*/_jsxDEV(\"img\", {\n              src: photoUrl.startsWith('http') ? photoUrl : `http://localhost:5000${photoUrl}`,\n              alt: `햓쮐 ${index + 1}`,\n              onClick: () => setImageModalUrl(photoUrl.startsWith('http') ? photoUrl : `http://localhost:5000${photoUrl}`)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 45\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 37\n          }, this), editingReviewId === review.id && editPhotos.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-photos\",\n            children: editPhotos.map((photo, index) => /*#__PURE__*/_jsxDEV(\"img\", {\n              src: photo.url.startsWith('http') ? photo.url : `http://localhost:5000${photo.url}`,\n              alt: `햓쮐 ${index + 1}`,\n              onClick: () => setImageModalUrl(photo.url.startsWith('http') ? photo.url : `http://localhost:5000${photo.url}`)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 45\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-footer\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-reactions-wrapper\",\n              children: [reactions[review.id] && Object.keys(reactions[review.id]).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"review-reactions\",\n                children: Object.entries(reactions[review.id]).map(([reaction, users]) => /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"reaction-button-with-count\",\n                  onClick: () => handleToggleReaction(review.id, reaction),\n                  title: users.map(u => u.name).join(', '),\n                  children: [reaction.startsWith('data:image') || reaction.startsWith('http') ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: reaction,\n                    alt: \"reaction\",\n                    className: \"reaction-image\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 511,\n                    columnNumber: 61\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"reaction-emoji\",\n                    children: reaction\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 513,\n                    columnNumber: 61\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"reaction-count\",\n                    children: users.length\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 515,\n                    columnNumber: 57\n                  }, this)]\n                }, reaction, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 53\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 45\n              }, this), currentUser && !hasUserReactedToMessage(review.id) && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"review-reaction-controls\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"add-reaction-btn-icon\",\n                  onClick: () => setShowReactionPicker(showReactionPicker === review.id ? null : review.id),\n                  title: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0440\\u0435\\u0430\\u043A\\u0446\\u0438\\u044E\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: process.env.PUBLIC_URL ? `${process.env.PUBLIC_URL}/icons/reaction.svg` : '/icons/reaction.svg',\n                    alt: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0440\\u0435\\u0430\\u043A\\u0446\\u0438\\u044E\",\n                    className: \"reaction-icon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 531,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 524,\n                  columnNumber: 49\n                }, this), showReactionPicker === review.id && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"reaction-picker\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"reaction-picker-section\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"quick-reactions\",\n                      children: ['游녨', '游녩', '仇벒잺', '游땍', '游땕', '游땵', '游땸', '游땩', '游꿀', '游댠'].map(emoji => /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"quick-reaction-btn\",\n                        onClick: () => handleToggleReaction(review.id, emoji),\n                        children: emoji\n                      }, emoji, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 543,\n                        columnNumber: 69\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 541,\n                      columnNumber: 61\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 540,\n                    columnNumber: 57\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 539,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 523,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 33\n          }, this)]\n        }, review.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 29\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 13\n    }, this), imageModalUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"review-image-modal\",\n      onClick: () => setImageModalUrl(null),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"review-image-modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"review-image-modal-close\",\n          onClick: () => setImageModalUrl(null),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: imageModalUrl,\n          alt: \"\\u041F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 270,\n    columnNumber: 9\n  }, this);\n};\n_s(BreedReviews, \"fqsNBPqk+o+g9zmvvltfjEI0vhM=\", false, function () {\n  return [useAuth];\n});\n_c = BreedReviews;\nexport default BreedReviews;\nvar _c;\n$RefreshReg$(_c, \"BreedReviews\");","map":{"version":3,"names":["React","useState","useEffect","useRef","io","petsAPI","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","BreedReviews","breedId","_s","currentUser","reviews","setReviews","newReview","setNewReview","reviewPhotos","setReviewPhotos","loading","setLoading","socket","setSocket","reactions","setReactions","showReactionPicker","setShowReactionPicker","reactionInput","setReactionInput","imageModalUrl","setImageModalUrl","editingReviewId","setEditingReviewId","editText","setEditText","editPhotos","setEditPhotos","showReviewMenu","setShowReviewMenu","fileInputRef","editFileInputRef","token","localStorage","getItem","newSocket","auth","on","console","log","emit","review","prev","updatedReview","map","r","id","data","filter","reviewId","loadReviews","disconnect","getBreedReviews","reactionsData","reviewReactions","getReviewReactions","error","handlePhotoChange","e","files","Array","from","target","length","uploadPromises","file","uploadFile","uploadedFiles","Promise","all","handleSubmitReview","preventDefault","trim","photosJson","JSON","stringify","p","url","text","photos","current","value","handleToggleReaction","reaction","parsePhotos","parse","formatTime","dateString","date","Date","now","diff","seconds","Math","floor","minutes","hours","days","toLocaleDateString","day","month","hour","minute","hasUserReacted","some","user","hasUserReactedToMessage","Object","values","users","handleStartEdit","photosList","handleCancelEdit","handleSaveEdit","handleDeleteReview","window","confirm","handleEditPhotoChange","handleClickOutside","event","closest","document","addEventListener","removeEventListener","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","placeholder","onChange","maxLength","type","onClick","_fileInputRef$current","click","ref","multiple","accept","style","display","photo","index","src","startsWith","alt","_","i","disabled","reviewPhotosList","avatar","name","charAt","toUpperCase","createdat","stopPropagation","title","onKeyDown","key","ctrlKey","autoFocus","_editFileInputRef$cur","photoUrl","keys","entries","u","join","process","env","PUBLIC_URL","emoji","_c","$RefreshReg$"],"sources":["D:/BSTU/Projects/햑먫뉋/PurePawSome/client/src/components/breeds/BreedReviews.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport { petsAPI } from '../../services/api';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport '../../styles/BreedReviews.css';\r\n\r\nconst BreedReviews = ({ breedId }) => {\r\n    const { currentUser } = useAuth();\r\n    const [reviews, setReviews] = useState([]);\r\n    const [newReview, setNewReview] = useState('');\r\n    const [reviewPhotos, setReviewPhotos] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [socket, setSocket] = useState(null);\r\n    const [reactions, setReactions] = useState({});\r\n    const [showReactionPicker, setShowReactionPicker] = useState(null);\r\n    const [reactionInput, setReactionInput] = useState('');\r\n    const [imageModalUrl, setImageModalUrl] = useState(null);\r\n    const [editingReviewId, setEditingReviewId] = useState(null);\r\n    const [editText, setEditText] = useState('');\r\n    const [editPhotos, setEditPhotos] = useState([]);\r\n    const [showReviewMenu, setShowReviewMenu] = useState(null);\r\n    const fileInputRef = useRef(null);\r\n    const editFileInputRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (!currentUser) return;\r\n\r\n        const token = localStorage.getItem('token');\r\n        if (!token) return;\r\n\r\n        const newSocket = io('http://localhost:5000', {\r\n            auth: { token: token }\r\n        });\r\n\r\n        newSocket.on('connect', () => {\r\n            console.log('쮏얧쥃혩혢햣햫 햨 쮐향혦쒫썛');\r\n            newSocket.emit('join-breed-reviews', breedId);\r\n        });\r\n\r\n        newSocket.on('new-review', (review) => {\r\n            setReviews(prev => [...prev, review]);\r\n        });\r\n\r\n        newSocket.on('review-updated', (updatedReview) => {\r\n            setReviews(prev => prev.map(r => r.id === updatedReview.id ? updatedReview : r));\r\n        });\r\n\r\n        newSocket.on('review-deleted', (data) => {\r\n            setReviews(prev => prev.filter(r => r.id !== data.reviewId));\r\n        });\r\n\r\n        newSocket.on('review-reaction-updated', (data) => {\r\n            setReactions(prev => ({\r\n                ...prev,\r\n                [data.reviewId]: data.reactions\r\n            }));\r\n        });\r\n\r\n        setSocket(newSocket);\r\n        loadReviews();\r\n\r\n        return () => {\r\n            newSocket.emit('leave-breed-reviews', breedId);\r\n            newSocket.disconnect();\r\n        };\r\n    }, [breedId, currentUser]);\r\n\r\n    const loadReviews = async () => {\r\n        try {\r\n            const data = await petsAPI.getBreedReviews(breedId);\r\n            setReviews(data);\r\n            \r\n            const reactionsData = {};\r\n            for (const review of data) {\r\n                try {\r\n                    const reviewReactions = await petsAPI.getReviewReactions(review.id);\r\n                    reactionsData[review.id] = reviewReactions;\r\n                } catch (error) {\r\n                    console.error(`뤰걣쟳쐃쥃 햦 향햟햡혞향햨햣 햣햟햨혡햦햧 햢햩혪 쮐향혦쒫 ${review.id}:`, error);\r\n                }\r\n            }\r\n            setReactions(reactionsData);\r\n            \r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('뤰걣쟳쐃쥃 햦 향햟햡혞향햨햣 쮐향혦쒫쮏:', error);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handlePhotoChange = async (e) => {\r\n        const files = Array.from(e.target.files);\r\n        if (files.length === 0) return;\r\n\r\n        try {\r\n            const uploadPromises = files.map(file => petsAPI.uploadFile(file));\r\n            const uploadedFiles = await Promise.all(uploadPromises);\r\n            setReviewPhotos(prev => [...prev, ...uploadedFiles]);\r\n        } catch (error) {\r\n            console.error('뤰걣쟳쐃쥃 햦 향햟햡혞향햨햣 혟쮐쮏햟혟햦햧:', error);\r\n        }\r\n    };\r\n\r\n    const handleSubmitReview = async (e) => {\r\n        e.preventDefault();\r\n        if ((!newReview.trim() && reviewPhotos.length === 0) || !socket) return;\r\n\r\n        try {\r\n            const photosJson = reviewPhotos.length > 0 ? JSON.stringify(reviewPhotos.map(p => p.url)) : null;\r\n            socket.emit('create-review', {\r\n                breedId: breedId,\r\n                text: newReview.trim() || '',\r\n                photos: photosJson\r\n            });\r\n            setNewReview('');\r\n            setReviewPhotos([]);\r\n            if (fileInputRef.current) {\r\n                fileInputRef.current.value = '';\r\n            }\r\n        } catch (error) {\r\n            console.error('뤰걣쟳쐃쥃 햦 쮐햟쒫쥃 쮐향혦쒫:', error);\r\n        }\r\n    };\r\n\r\n    const handleToggleReaction = async (reviewId, reaction) => {\r\n        if (!socket || !currentUser) return;\r\n\r\n        try {\r\n            socket.emit('toggle-review-reaction', {\r\n                reviewId: reviewId,\r\n                reaction: reaction\r\n            });\r\n            setShowReactionPicker(null);\r\n            setReactionInput('');\r\n        } catch (error) {\r\n            console.error('뤰걣쟳쐃쥃 햦 쮐햟쒫쥃 햣햟햨혡햦햦:', error);\r\n        }\r\n    };\r\n\r\n    const parsePhotos = (photosJson) => {\r\n        if (!photosJson) return [];\r\n        try {\r\n            return JSON.parse(photosJson);\r\n        } catch {\r\n            return [];\r\n        }\r\n    };\r\n\r\n    const formatTime = (dateString) => {\r\n        const date = new Date(dateString);\r\n        const now = new Date();\r\n        const diff = now - date;\r\n        const seconds = Math.floor(diff / 1000);\r\n        const minutes = Math.floor(diff / 60000);\r\n        const hours = Math.floor(diff / 3600000);\r\n        const days = Math.floor(diff / 86400000);\r\n\r\n        if (seconds < 10) return '혝쮏혧햨 혢혝';\r\n        if (seconds < 60) return `${seconds} 혜햣햨 햫햟향햟햢`;\r\n        if (minutes < 60) return `${minutes} 햪햦햫 햫햟향햟햢`;\r\n        if (hours < 24) return `${hours} 혢 햫햟향햟햢`;\r\n        if (days < 7) return `${days} 햢햫 햫햟향햟햢`;\r\n        \r\n        return date.toLocaleDateString('ru-RU', {\r\n            day: 'numeric',\r\n            month: 'short',\r\n            hour: '2-digit',\r\n            minute: '2-digit'\r\n        });\r\n    };\r\n\r\n    const hasUserReacted = (reviewId, reaction) => {\r\n        const reviewReactions = reactions[reviewId];\r\n        if (!reviewReactions || !reviewReactions[reaction]) return false;\r\n        return reviewReactions[reaction].some(user => user.id === currentUser?.id);\r\n    };\r\n\r\n    const hasUserReactedToMessage = (reviewId) => {\r\n        const reviewReactions = reactions[reviewId];\r\n        if (!reviewReactions) return false;\r\n        return Object.values(reviewReactions).some(users => \r\n            users.some(user => user.id === currentUser?.id)\r\n        );\r\n    };\r\n\r\n    const handleStartEdit = (review) => {\r\n        setEditingReviewId(review.id);\r\n        setEditText(review.text || '');\r\n        const photosList = parsePhotos(review.photos);\r\n        setEditPhotos(photosList.map(url => ({ url })));\r\n        setShowReviewMenu(null);\r\n    };\r\n\r\n    const handleCancelEdit = () => {\r\n        setEditingReviewId(null);\r\n        setEditText('');\r\n        setEditPhotos([]);\r\n    };\r\n\r\n    const handleSaveEdit = async (reviewId) => {\r\n        if ((!editText.trim() && editPhotos.length === 0) || !socket) return;\r\n\r\n        try {\r\n            const photosJson = editPhotos.length > 0 ? JSON.stringify(editPhotos.map(p => p.url)) : null;\r\n            socket.emit('update-review', {\r\n                reviewId: reviewId,\r\n                text: editText.trim() || '',\r\n                photos: photosJson\r\n            });\r\n            setEditingReviewId(null);\r\n            setEditText('');\r\n            setEditPhotos([]);\r\n        } catch (error) {\r\n            console.error('뤰걣쟳쐃쥃 햦 햣햢햟햨혝햦쮏쒫썛쫧쟳 쮐향혦쒫:', error);\r\n        }\r\n    };\r\n\r\n    const handleDeleteReview = async (reviewId) => {\r\n        if (!window.confirm('뉌 혞쒫왐햣햫혦, 혢혝 혠쮐햦혝햣 혞햢햟햩햦혝혧 혨혝쮐 쮐향혦?')) {\r\n            return;\r\n        }\r\n\r\n        if (!socket) return;\r\n\r\n        try {\r\n            socket.emit('delete-review', {\r\n                reviewId: reviewId,\r\n            });\r\n            setShowReviewMenu(null);\r\n        } catch (error) {\r\n            console.error('뤰걣쟳쐃쥃 햦 혞햢햟햩햣햫햦햦 쮐향혦쒫:', error);\r\n        }\r\n    };\r\n\r\n    const handleEditPhotoChange = async (e) => {\r\n        const files = Array.from(e.target.files);\r\n        if (files.length === 0) return;\r\n\r\n        try {\r\n            const uploadPromises = files.map(file => petsAPI.uploadFile(file));\r\n            const uploadedFiles = await Promise.all(uploadPromises);\r\n            setEditPhotos(prev => [...prev, ...uploadedFiles]);\r\n        } catch (error) {\r\n            console.error('뤰걣쟳쐃쥃 햦 향햟햡혞향햨햣 혟쮐쮏햟혟햦햧:', error);\r\n        }\r\n    };\r\n\r\n    // 행햟햨혦혝햦햣 햪햣햫혩 햦 햨햩햦햨햣 쒫쫧 햣햡쬪r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (showReviewMenu && !event.target.closest('.review-actions-wrapper')) {\r\n                setShowReviewMenu(null);\r\n            }\r\n            if (showReactionPicker && !event.target.closest('.review-reaction-controls')) {\r\n                setShowReactionPicker(null);\r\n            }\r\n        };\r\n\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, [showReviewMenu, showReactionPicker]);\r\n\r\n    if (loading) {\r\n        return <div className=\"breed-reviews-loading\">행햟햡혞향햨햟 쮐향혦쒫쮏...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"breed-reviews\">\r\n            {currentUser ? (\r\n                <form className=\"review-form\" onSubmit={handleSubmitReview}>\r\n                    <textarea\r\n                        className=\"review-input\"\r\n                        placeholder=\"햏햟햦혣햦혝햣 쮐향혦  쮐쮏얧...\"\r\n                        value={newReview}\r\n                        onChange={(e) => setNewReview(e.target.value)}\r\n                        maxLength={2000}\r\n                    />\r\n                    <div className=\"review-form-actions\">\r\n                        <button\r\n                            type=\"button\"\r\n                            className=\"attach-photos-btn\"\r\n                            onClick={() => fileInputRef.current?.click()}\r\n                        >\r\n                            游닝 햆쮏쐃썛쒫쟴혧 혟쮐쬪r\n                        </button>\r\n                        <input\r\n                            ref={fileInputRef}\r\n                            type=\"file\"\r\n                            multiple\r\n                            accept=\"image/*\"\r\n                            style={{ display: 'none' }}\r\n                            onChange={handlePhotoChange}\r\n                        />\r\n                        {reviewPhotos.length > 0 && (\r\n                            <div className=\"review-photos-preview\">\r\n                                {reviewPhotos.map((photo, index) => (\r\n                                    <div key={index} className=\"photo-preview\">\r\n                                        <img src={photo.url.startsWith('http') ? photo.url : `http://localhost:5000${photo.url}`} alt=\"Preview\" />\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            onClick={() => setReviewPhotos(prev => prev.filter((_, i) => i !== index))}\r\n                                        >\r\n                                            칑\r\n                                        </button>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                        <button\r\n                            type=\"submit\"\r\n                            className=\"submit-review-btn\"\r\n                            disabled={(!newReview.trim() && reviewPhotos.length === 0) || !socket}\r\n                        >\r\n                            뤰햟쒫쟴혧 쮐향혦쑆r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            ) : (\r\n                <div className=\"review-login-prompt\">\r\n                    <p>뉋쮏좛얧쟴햣, 혢혝쮏쐄 쮐혝햟쒫쟴혧 쮐향혦</p>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"reviews-list\">\r\n                {reviews.length === 0 ? (\r\n                    <div className=\"reviews-empty\">\r\n                        <p>쮏쥃 햫햣혝 쮐향혦쒫쮏. 햄혞햢혧혝햣 햣쒬햪!</p>\r\n                    </div>\r\n                ) : (\r\n                    reviews.map((review) => {\r\n                        const reviewPhotosList = parsePhotos(review.photos);\r\n                        return (\r\n                            <div key={review.id} className=\"review-item\">\r\n                                <div className=\"review-header\">\r\n                                    <div className=\"review-author-info\">\r\n                                        <div className=\"review-avatar\">\r\n                                            {review.user.avatar ? (\r\n                                                <img\r\n                                                    src={review.user.avatar.startsWith('http') \r\n                                                        ? review.user.avatar \r\n                                                        : `http://localhost:5000${review.user.avatar}`}\r\n                                                    alt={review.user.name}\r\n                                                />\r\n                                            ) : (\r\n                                                <div className=\"avatar-placeholder\">\r\n                                                    {review.user.name.charAt(0).toUpperCase()}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"review-author-details\">\r\n                                            <span className=\"review-author\">{review.user.name}</span>\r\n                                            <span className=\"review-time\">{formatTime(review.createdat)}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    {review.user.id === currentUser?.id && (\r\n                                        <div className=\"review-actions-wrapper\">\r\n                                            <button\r\n                                                className=\"review-menu-btn\"\r\n                                                onClick={(e) => {\r\n                                                    e.stopPropagation();\r\n                                                    setShowReviewMenu(showReviewMenu === review.id ? null : review.id);\r\n                                                }}\r\n                                                title=\"햎햣햫혩 쮐향혦쒫\"\r\n                                            >\r\n                                                긽\r\n                                            </button>\r\n                                            {showReviewMenu === review.id && (\r\n                                                <div className=\"review-menu-dropdown\" onClick={(e) => e.stopPropagation()}>\r\n                                                    {editingReviewId === review.id ? (\r\n                                                        <>\r\n                                                            <button\r\n                                                                className=\"review-menu-item\"\r\n                                                                onClick={() => {\r\n                                                                    handleSaveEdit(review.id);\r\n                                                                    setShowReviewMenu(null);\r\n                                                                }}\r\n                                                            >\r\n                                                                九 햐쮐햟햫햦혝혧\r\n                                                            </button>\r\n                                                            <button\r\n                                                                className=\"review-menu-item\"\r\n                                                                onClick={() => {\r\n                                                                    handleCancelEdit();\r\n                                                                    setShowReviewMenu(null);\r\n                                                                }}\r\n                                                            >\r\n                                                                칑 뤰햪햣햫햟\r\n                                                            </button>\r\n                                                        </>\r\n                                                    ) : (\r\n                                                        <>\r\n                                                            <button\r\n                                                                className=\"review-menu-item\"\r\n                                                                onClick={() => {\r\n                                                                    handleStartEdit(review);\r\n                                                                }}\r\n                                                            >\r\n                                                                먫왏얧썛쥄햦쮏쒫썜혧\r\n                                                            </button>\r\n                                                            <button\r\n                                                                className=\"review-menu-item\"\r\n                                                                onClick={() => {\r\n                                                                    handleDeleteReview(review.id);\r\n                                                                }}\r\n                                                            >\r\n                                                                햒햢햟햩햦혝혧\r\n                                                            </button>\r\n                                                        </>\r\n                                                    )}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                                {editingReviewId === review.id ? (\r\n                                    <>\r\n                                        <textarea\r\n                                            className=\"review-edit-input\"\r\n                                            value={editText}\r\n                                            onChange={(e) => setEditText(e.target.value)}\r\n                                            onKeyDown={(e) => {\r\n                                                if (e.key === 'Enter' && e.ctrlKey) {\r\n                                                    handleSaveEdit(review.id);\r\n                                                } else if (e.key === 'Escape') {\r\n                                                    handleCancelEdit();\r\n                                                }\r\n                                            }}\r\n                                            maxLength={2000}\r\n                                            autoFocus\r\n                                        />\r\n                                        <div className=\"review-form-actions\">\r\n                                            <button\r\n                                                type=\"button\"\r\n                                                className=\"attach-photos-btn\"\r\n                                                onClick={() => editFileInputRef.current?.click()}\r\n                                            >\r\n                                                游닝 햆쮏쐃썛쒫쟴혧 혟쮐쬪r\n                                            </button>\r\n                                            <input\r\n                                                ref={editFileInputRef}\r\n                                                type=\"file\"\r\n                                                multiple\r\n                                                accept=\"image/*\"\r\n                                                style={{ display: 'none' }}\r\n                                                onChange={handleEditPhotoChange}\r\n                                            />\r\n                                            {editPhotos.length > 0 && (\r\n                                                <div className=\"review-photos-preview\">\r\n                                                    {editPhotos.map((photo, index) => (\r\n                                                        <div key={index} className=\"photo-preview\">\r\n                                                            <img src={photo.url.startsWith('http') ? photo.url : `http://localhost:5000${photo.url}`} alt=\"Preview\" />\r\n                                                            <button\r\n                                                                type=\"button\"\r\n                                                                onClick={() => setEditPhotos(prev => prev.filter((_, i) => i !== index))}\r\n                                                            >\r\n                                                                칑\r\n                                                            </button>\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        {review.text && review.text.trim().length > 0 && (\r\n                                            <div className=\"review-text\">{review.text}</div>\r\n                                        )}\r\n                                    </>\r\n                                )}\r\n                                {editingReviewId !== review.id && reviewPhotosList.length > 0 && (\r\n                                    <div className=\"review-photos\">\r\n                                        {reviewPhotosList.map((photoUrl, index) => (\r\n                                            <img\r\n                                                key={index}\r\n                                                src={photoUrl.startsWith('http') ? photoUrl : `http://localhost:5000${photoUrl}`}\r\n                                                alt={`햓쮐 ${index + 1}`}\r\n                                                onClick={() => setImageModalUrl(photoUrl.startsWith('http') ? photoUrl : `http://localhost:5000${photoUrl}`)}\r\n                                            />\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                                {editingReviewId === review.id && editPhotos.length > 0 && (\r\n                                    <div className=\"review-photos\">\r\n                                        {editPhotos.map((photo, index) => (\r\n                                            <img\r\n                                                key={index}\r\n                                                src={photo.url.startsWith('http') ? photo.url : `http://localhost:5000${photo.url}`}\r\n                                                alt={`햓쮐 ${index + 1}`}\r\n                                                onClick={() => setImageModalUrl(photo.url.startsWith('http') ? photo.url : `http://localhost:5000${photo.url}`)}\r\n                                            />\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                                \r\n                                {/* 먫왏썛쥄햦햦 */}\r\n                                <div className=\"review-footer\">\r\n                                    <div className=\"review-reactions-wrapper\">\r\n                                        {reactions[review.id] && Object.keys(reactions[review.id]).length > 0 && (\r\n                                            <div className=\"review-reactions\">\r\n                                                {Object.entries(reactions[review.id]).map(([reaction, users]) => (\r\n                                                    <button\r\n                                                        key={reaction}\r\n                                                        className=\"reaction-button-with-count\"\r\n                                                        onClick={() => handleToggleReaction(review.id, reaction)}\r\n                                                        title={users.map(u => u.name).join(', ')}\r\n                                                    >\r\n                                                        {reaction.startsWith('data:image') || reaction.startsWith('http') ? (\r\n                                                            <img src={reaction} alt=\"reaction\" className=\"reaction-image\" />\r\n                                                        ) : (\r\n                                                            <span className=\"reaction-emoji\">{reaction}</span>\r\n                                                        )}\r\n                                                        <span className=\"reaction-count\">{users.length}</span>\r\n                                                    </button>\r\n                                                ))}\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {/* 햌햫쮏햨햟 햢쮏쐃썛쒫햣햫햦혪 햣햟햨혡햦햦 */}\r\n                                        {currentUser && !hasUserReactedToMessage(review.id) && (\r\n                                            <div className=\"review-reaction-controls\">\r\n                                                <button\r\n                                                    className=\"add-reaction-btn-icon\"\r\n                                                    onClick={() => setShowReactionPicker(\r\n                                                        showReactionPicker === review.id ? null : review.id\r\n                                                    )}\r\n                                                    title=\"햆쮏쐃썛쒫쟴혧 햣햟햨혡햦혩\"\r\n                                                >\r\n                                                    <img \r\n                                                        src={process.env.PUBLIC_URL ? `${process.env.PUBLIC_URL}/icons/reaction.svg` : '/icons/reaction.svg'} \r\n                                                        alt=\"햆쮏쐃썛쒫쟴혧 햣햟햨혡햦혩\" \r\n                                                        className=\"reaction-icon\"\r\n                                                    />\r\n                                                </button>\r\n                                                \r\n                                                {showReactionPicker === review.id && (\r\n                                                    <div className=\"reaction-picker\">\r\n                                                        <div className=\"reaction-picker-section\">\r\n                                                            <div className=\"quick-reactions\">\r\n                                                                {['游녨', '游녩', '仇벒잺', '游땍', '游땕', '游땵', '游땸', '游땩', '游꿀', '游댠'].map(emoji => (\r\n                                                                    <button\r\n                                                                        key={emoji}\r\n                                                                        className=\"quick-reaction-btn\"\r\n                                                                        onClick={() => handleToggleReaction(review.id, emoji)}\r\n                                                                    >\r\n                                                                        {emoji}\r\n                                                                    </button>\r\n                                                                ))}\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })\r\n                )}\r\n            </div>\r\n\r\n            {imageModalUrl && (\r\n                <div className=\"review-image-modal\" onClick={() => setImageModalUrl(null)}>\r\n                    <div className=\"review-image-modal-content\" onClick={(e) => e.stopPropagation()}>\r\n                        <button\r\n                            className=\"review-image-modal-close\"\r\n                            onClick={() => setImageModalUrl(null)}\r\n                        >\r\n                            칑\r\n                        </button>\r\n                        <img src={imageModalUrl} alt=\"쮐햪쮐\" />\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BreedReviews;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}