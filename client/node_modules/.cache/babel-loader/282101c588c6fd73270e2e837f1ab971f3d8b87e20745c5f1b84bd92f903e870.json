{"ast":null,"code":"var _jsxFileName = \"D:\\\\BSTU\\\\Projects\\\\\\u0422\\u0420\\u0412\\u041F\\\\PurePawSome\\\\client\\\\src\\\\components\\\\breeds\\\\BreedReviews.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { io } from 'socket.io-client';\nimport { petsAPI } from '../../services/api';\nimport { useAuth } from '../../context/AuthContext';\nimport '../../styles/BreedReviews.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BreedReviews = ({\n  breedId\n}) => {\n  _s();\n  const {\n    currentUser\n  } = useAuth();\n  const [reviews, setReviews] = useState([]);\n  const [newReview, setNewReview] = useState('');\n  const [reviewPhotos, setReviewPhotos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [socket, setSocket] = useState(null);\n  const [reactions, setReactions] = useState({});\n  const [showReactionPicker, setShowReactionPicker] = useState(null);\n  const [reactionInput, setReactionInput] = useState('');\n  const [imageModalUrl, setImageModalUrl] = useState(null);\n  const [editingReviewId, setEditingReviewId] = useState(null);\n  const [editText, setEditText] = useState('');\n  const [editPhotos, setEditPhotos] = useState([]);\n  const [showReviewMenu, setShowReviewMenu] = useState(null);\n  const fileInputRef = useRef(null);\n  const editFileInputRef = useRef(null);\n  useEffect(() => {\n    if (!currentUser) return;\n    const token = localStorage.getItem('token');\n    if (!token) return;\n    const newSocket = io('http://localhost:5000', {\n      auth: {\n        token: token\n      }\n    });\n    newSocket.on('connect', () => {\n      console.log('–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ –æ—Ç–∑—ã–≤–∞–º');\n      newSocket.emit('join-breed-reviews', breedId);\n    });\n    newSocket.on('new-review', review => {\n      setReviews(prev => [...prev, review]);\n    });\n    newSocket.on('review-updated', updatedReview => {\n      setReviews(prev => prev.map(r => r.id === updatedReview.id ? updatedReview : r));\n    });\n    newSocket.on('review-deleted', data => {\n      setReviews(prev => prev.filter(r => r.id !== data.reviewId));\n    });\n    newSocket.on('review-reaction-updated', data => {\n      setReactions(prev => ({\n        ...prev,\n        [data.reviewId]: data.reactions\n      }));\n    });\n    setSocket(newSocket);\n    loadReviews();\n    return () => {\n      newSocket.emit('leave-breed-reviews', breedId);\n      newSocket.disconnect();\n    };\n  }, [breedId, currentUser]);\n  const loadReviews = async () => {\n    try {\n      const data = await petsAPI.getBreedReviews(breedId);\n      setReviews(data);\n      const reactionsData = {};\n      for (const review of data) {\n        try {\n          const reviewReactions = await petsAPI.getReviewReactions(review.id);\n          reactionsData[review.id] = reviewReactions;\n        } catch (error) {\n          console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ä–µ–∞–∫—Ü–∏–π –¥–ª—è –æ—Ç–∑—ã–≤–∞ ${review.id}:`, error);\n        }\n      }\n      setReactions(reactionsData);\n      setLoading(false);\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –æ—Ç–∑—ã–≤–æ–≤:', error);\n      setLoading(false);\n    }\n  };\n  const handlePhotoChange = async e => {\n    const files = Array.from(e.target.files);\n    if (files.length === 0) return;\n    try {\n      const uploadPromises = files.map(file => petsAPI.uploadFile(file));\n      const uploadedFiles = await Promise.all(uploadPromises);\n      setReviewPhotos(prev => [...prev, ...uploadedFiles]);\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:', error);\n    }\n  };\n  const handleSubmitReview = async e => {\n    e.preventDefault();\n    if (!newReview.trim() && reviewPhotos.length === 0 || !socket) return;\n    try {\n      const photosJson = reviewPhotos.length > 0 ? JSON.stringify(reviewPhotos.map(p => p.url)) : null;\n      socket.emit('create-review', {\n        breedId: breedId,\n        text: newReview.trim() || '',\n        photos: photosJson\n      });\n      setNewReview('');\n      setReviewPhotos([]);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–∑—ã–≤–∞:', error);\n    }\n  };\n  const handleToggleReaction = async (reviewId, reaction) => {\n    if (!socket || !currentUser) return;\n    try {\n      socket.emit('toggle-review-reaction', {\n        reviewId: reviewId,\n        reaction: reaction\n      });\n      setShowReactionPicker(null);\n      setReactionInput('');\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ä–µ–∞–∫—Ü–∏–∏:', error);\n    }\n  };\n  const parsePhotos = photosJson => {\n    if (!photosJson) return [];\n    try {\n      return JSON.parse(photosJson);\n    } catch {\n      return [];\n    }\n  };\n  const formatTime = dateString => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diff = now - date;\n    const seconds = Math.floor(diff / 1000);\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(diff / 3600000);\n    const days = Math.floor(diff / 86400000);\n    if (seconds < 10) return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';\n    if (seconds < 60) return `${seconds} —Å–µ–∫ –Ω–∞–∑–∞–¥`;\n    if (minutes < 60) return `${minutes} –º–∏–Ω –Ω–∞–∑–∞–¥`;\n    if (hours < 24) return `${hours} —á –Ω–∞–∑–∞–¥`;\n    if (days < 7) return `${days} –¥–Ω –Ω–∞–∑–∞–¥`;\n    return date.toLocaleDateString('ru-RU', {\n      day: 'numeric',\n      month: 'short',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  const hasUserReacted = (reviewId, reaction) => {\n    const reviewReactions = reactions[reviewId];\n    if (!reviewReactions || !reviewReactions[reaction]) return false;\n    return reviewReactions[reaction].some(user => user.id === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id));\n  };\n  const handleStartEdit = review => {\n    setEditingReviewId(review.id);\n    setEditText(review.text || '');\n    const photosList = parsePhotos(review.photos);\n    setEditPhotos(photosList.map(url => ({\n      url\n    })));\n    setShowReviewMenu(null);\n  };\n  const handleCancelEdit = () => {\n    setEditingReviewId(null);\n    setEditText('');\n    setEditPhotos([]);\n  };\n  const handleSaveEdit = async reviewId => {\n    if (!editText.trim() && editPhotos.length === 0 || !socket) return;\n    try {\n      const photosJson = editPhotos.length > 0 ? JSON.stringify(editPhotos.map(p => p.url)) : null;\n      socket.emit('update-review', {\n        reviewId: reviewId,\n        text: editText.trim() || '',\n        photos: photosJson\n      });\n      setEditingReviewId(null);\n      setEditText('');\n      setEditPhotos([]);\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –æ—Ç–∑—ã–≤–∞:', error);\n    }\n  };\n  const handleDeleteReview = async reviewId => {\n    if (!window.confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –æ—Ç–∑—ã–≤?')) {\n      return;\n    }\n    if (!socket) return;\n    try {\n      socket.emit('delete-review', {\n        reviewId: reviewId\n      });\n      setShowReviewMenu(null);\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ—Ç–∑—ã–≤–∞:', error);\n    }\n  };\n  const handleEditPhotoChange = async e => {\n    const files = Array.from(e.target.files);\n    if (files.length === 0) return;\n    try {\n      const uploadPromises = files.map(file => petsAPI.uploadFile(file));\n      const uploadedFiles = await Promise.all(uploadPromises);\n      setEditPhotos(prev => [...prev, ...uploadedFiles]);\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:', error);\n    }\n  };\n\n  // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (showReviewMenu && !event.target.closest('.review-actions-wrapper')) {\n        setShowReviewMenu(null);\n      }\n      if (showReactionPicker && !event.target.closest('.review-reaction-controls')) {\n        setShowReactionPicker(null);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showReviewMenu, showReactionPicker]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"breed-reviews-loading\",\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043E\\u0442\\u0437\\u044B\\u0432\\u043E\\u0432...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"breed-reviews\",\n    children: [currentUser ? /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"review-form\",\n      onSubmit: handleSubmitReview,\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"review-input\",\n        placeholder: \"\\u041D\\u0430\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u043E\\u0442\\u0437\\u044B\\u0432 \\u043E \\u043F\\u043E\\u0440\\u043E\\u0434\\u0435...\",\n        value: newReview,\n        onChange: e => setNewReview(e.target.value),\n        maxLength: 2000\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"review-form-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"attach-photos-btn\",\n          onClick: () => {\n            var _fileInputRef$current;\n            return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n          },\n          children: \"\\uD83D\\uDCF7 \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileInputRef,\n          type: \"file\",\n          multiple: true,\n          accept: \"image/*\",\n          style: {\n            display: 'none'\n          },\n          onChange: handlePhotoChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 25\n        }, this), reviewPhotos.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"review-photos-preview\",\n          children: reviewPhotos.map((photo, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"photo-preview\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: photo.url.startsWith('http') ? photo.url : `http://localhost:5000${photo.url}`,\n              alt: \"Preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setReviewPhotos(prev => prev.filter((_, i) => i !== index)),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 41\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 37\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submit-review-btn\",\n          disabled: !newReview.trim() && reviewPhotos.length === 0 || !socket,\n          children: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"review-login-prompt\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0412\\u043E\\u0439\\u0434\\u0438\\u0442\\u0435, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043E\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reviews-list\",\n      children: reviews.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reviews-empty\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442 \\u043E\\u0442\\u0437\\u044B\\u0432\\u043E\\u0432. \\u0411\\u0443\\u0434\\u044C\\u0442\\u0435 \\u043F\\u0435\\u0440\\u0432\\u044B\\u043C!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 21\n      }, this) : reviews.map(review => {\n        const reviewPhotosList = parsePhotos(review.photos);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"review-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-header\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-author-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"review-avatar\",\n                children: review.user.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: review.user.avatar.startsWith('http') ? review.user.avatar : `http://localhost:5000${review.user.avatar}`,\n                  alt: review.user.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 49\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"avatar-placeholder\",\n                  children: review.user.name.charAt(0).toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"review-author-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"review-author\",\n                  children: review.user.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"review-time\",\n                  children: formatTime(review.createdat)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 33\n          }, this), review.text && review.text.trim().length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-text\",\n            children: review.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 37\n          }, this), reviewPhotosList.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-photos\",\n            children: reviewPhotosList.map((photoUrl, index) => /*#__PURE__*/_jsxDEV(\"img\", {\n              src: photoUrl.startsWith('http') ? photoUrl : `http://localhost:5000${photoUrl}`,\n              alt: `–§–æ—Ç–æ ${index + 1}`,\n              onClick: () => setImageModalUrl(photoUrl.startsWith('http') ? photoUrl : `http://localhost:5000${photoUrl}`)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 45\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 37\n          }, this), reactions[review.id] && Object.keys(reactions[review.id]).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-reactions\",\n            children: Object.entries(reactions[review.id]).map(([reaction, users]) => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `reaction-button ${hasUserReacted(review.id, reaction) ? 'reacted' : ''}`,\n              onClick: () => handleToggleReaction(review.id, reaction),\n              title: users.map(u => u.name).join(', '),\n              children: [reaction.startsWith('data:image') || reaction.startsWith('http') ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: reaction,\n                alt: \"reaction\",\n                className: \"reaction-image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 53\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"reaction-emoji\",\n                children: reaction\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"reaction-count\",\n                children: users.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 49\n              }, this)]\n            }, reaction, true, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 45\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 37\n          }, this), currentUser && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-reaction-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"add-reaction-btn\",\n              onClick: () => setShowReactionPicker(showReactionPicker === review.id ? null : review.id),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 45\n              }, this), \" \\u0420\\u0435\\u0430\\u043A\\u0446\\u0438\\u044F\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 41\n            }, this), showReactionPicker === review.id && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reaction-picker\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"reaction-picker-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"URL \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"\\u0412\\u0441\\u0442\\u0430\\u0432\\u044C\\u0442\\u0435 URL \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\",\n                  value: reactionInput,\n                  onChange: e => setReactionInput(e.target.value),\n                  onKeyPress: e => {\n                    if (e.key === 'Enter') {\n                      if (reactionInput.trim()) {\n                        handleToggleReaction(review.id, reactionInput.trim());\n                      }\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 405,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    if (reactionInput.trim()) {\n                      handleToggleReaction(review.id, reactionInput.trim());\n                    }\n                  },\n                  disabled: !reactionInput.trim(),\n                  children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 418,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"reaction-picker-divider\",\n                children: \"\\u0438\\u043B\\u0438\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"reaction-picker-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"\\u0411\\u044B\\u0441\\u0442\\u0440\\u044B\\u0435 \\u044D\\u043C\\u043E\\u0434\\u0437\\u0438:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 431,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"quick-reactions\",\n                  children: ['üëç', '‚ù§Ô∏è', 'üòÇ', 'üòä', 'üòÆ', 'üò¢', 'üéâ', 'üî•'].map(emoji => /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"quick-reaction-btn\",\n                    onClick: () => handleToggleReaction(review.id, emoji),\n                    children: emoji\n                  }, emoji, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 434,\n                    columnNumber: 61\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 49\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 37\n          }, this)]\n        }, review.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 29\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 13\n    }, this), imageModalUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"review-image-modal\",\n      onClick: () => setImageModalUrl(null),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"review-image-modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"review-image-modal-close\",\n          onClick: () => setImageModalUrl(null),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: imageModalUrl,\n          alt: \"\\u041F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 262,\n    columnNumber: 9\n  }, this);\n};\n_s(BreedReviews, \"fqsNBPqk+o+g9zmvvltfjEI0vhM=\", false, function () {\n  return [useAuth];\n});\n_c = BreedReviews;\nexport default BreedReviews;\nvar _c;\n$RefreshReg$(_c, \"BreedReviews\");","map":{"version":3,"names":["React","useState","useEffect","useRef","io","petsAPI","useAuth","jsxDEV","_jsxDEV","BreedReviews","breedId","_s","currentUser","reviews","setReviews","newReview","setNewReview","reviewPhotos","setReviewPhotos","loading","setLoading","socket","setSocket","reactions","setReactions","showReactionPicker","setShowReactionPicker","reactionInput","setReactionInput","imageModalUrl","setImageModalUrl","editingReviewId","setEditingReviewId","editText","setEditText","editPhotos","setEditPhotos","showReviewMenu","setShowReviewMenu","fileInputRef","editFileInputRef","token","localStorage","getItem","newSocket","auth","on","console","log","emit","review","prev","updatedReview","map","r","id","data","filter","reviewId","loadReviews","disconnect","getBreedReviews","reactionsData","reviewReactions","getReviewReactions","error","handlePhotoChange","e","files","Array","from","target","length","uploadPromises","file","uploadFile","uploadedFiles","Promise","all","handleSubmitReview","preventDefault","trim","photosJson","JSON","stringify","p","url","text","photos","current","value","handleToggleReaction","reaction","parsePhotos","parse","formatTime","dateString","date","Date","now","diff","seconds","Math","floor","minutes","hours","days","toLocaleDateString","day","month","hour","minute","hasUserReacted","some","user","handleStartEdit","photosList","handleCancelEdit","handleSaveEdit","handleDeleteReview","window","confirm","handleEditPhotoChange","handleClickOutside","event","closest","document","addEventListener","removeEventListener","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","placeholder","onChange","maxLength","type","onClick","_fileInputRef$current","click","ref","multiple","accept","style","display","photo","index","src","startsWith","alt","_","i","disabled","reviewPhotosList","avatar","name","charAt","toUpperCase","createdat","photoUrl","Object","keys","entries","users","title","u","join","onKeyPress","key","emoji","stopPropagation","_c","$RefreshReg$"],"sources":["D:/BSTU/Projects/–¢–†–í–ü/PurePawSome/client/src/components/breeds/BreedReviews.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport { petsAPI } from '../../services/api';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport '../../styles/BreedReviews.css';\r\n\r\nconst BreedReviews = ({ breedId }) => {\r\n    const { currentUser } = useAuth();\r\n    const [reviews, setReviews] = useState([]);\r\n    const [newReview, setNewReview] = useState('');\r\n    const [reviewPhotos, setReviewPhotos] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [socket, setSocket] = useState(null);\r\n    const [reactions, setReactions] = useState({});\r\n    const [showReactionPicker, setShowReactionPicker] = useState(null);\r\n    const [reactionInput, setReactionInput] = useState('');\r\n    const [imageModalUrl, setImageModalUrl] = useState(null);\r\n    const [editingReviewId, setEditingReviewId] = useState(null);\r\n    const [editText, setEditText] = useState('');\r\n    const [editPhotos, setEditPhotos] = useState([]);\r\n    const [showReviewMenu, setShowReviewMenu] = useState(null);\r\n    const fileInputRef = useRef(null);\r\n    const editFileInputRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (!currentUser) return;\r\n\r\n        const token = localStorage.getItem('token');\r\n        if (!token) return;\r\n\r\n        const newSocket = io('http://localhost:5000', {\r\n            auth: { token: token }\r\n        });\r\n\r\n        newSocket.on('connect', () => {\r\n            console.log('–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ –æ—Ç–∑—ã–≤–∞–º');\r\n            newSocket.emit('join-breed-reviews', breedId);\r\n        });\r\n\r\n        newSocket.on('new-review', (review) => {\r\n            setReviews(prev => [...prev, review]);\r\n        });\r\n\r\n        newSocket.on('review-updated', (updatedReview) => {\r\n            setReviews(prev => prev.map(r => r.id === updatedReview.id ? updatedReview : r));\r\n        });\r\n\r\n        newSocket.on('review-deleted', (data) => {\r\n            setReviews(prev => prev.filter(r => r.id !== data.reviewId));\r\n        });\r\n\r\n        newSocket.on('review-reaction-updated', (data) => {\r\n            setReactions(prev => ({\r\n                ...prev,\r\n                [data.reviewId]: data.reactions\r\n            }));\r\n        });\r\n\r\n        setSocket(newSocket);\r\n        loadReviews();\r\n\r\n        return () => {\r\n            newSocket.emit('leave-breed-reviews', breedId);\r\n            newSocket.disconnect();\r\n        };\r\n    }, [breedId, currentUser]);\r\n\r\n    const loadReviews = async () => {\r\n        try {\r\n            const data = await petsAPI.getBreedReviews(breedId);\r\n            setReviews(data);\r\n            \r\n            const reactionsData = {};\r\n            for (const review of data) {\r\n                try {\r\n                    const reviewReactions = await petsAPI.getReviewReactions(review.id);\r\n                    reactionsData[review.id] = reviewReactions;\r\n                } catch (error) {\r\n                    console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ä–µ–∞–∫—Ü–∏–π –¥–ª—è –æ—Ç–∑—ã–≤–∞ ${review.id}:`, error);\r\n                }\r\n            }\r\n            setReactions(reactionsData);\r\n            \r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –æ—Ç–∑—ã–≤–æ–≤:', error);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handlePhotoChange = async (e) => {\r\n        const files = Array.from(e.target.files);\r\n        if (files.length === 0) return;\r\n\r\n        try {\r\n            const uploadPromises = files.map(file => petsAPI.uploadFile(file));\r\n            const uploadedFiles = await Promise.all(uploadPromises);\r\n            setReviewPhotos(prev => [...prev, ...uploadedFiles]);\r\n        } catch (error) {\r\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:', error);\r\n        }\r\n    };\r\n\r\n    const handleSubmitReview = async (e) => {\r\n        e.preventDefault();\r\n        if ((!newReview.trim() && reviewPhotos.length === 0) || !socket) return;\r\n\r\n        try {\r\n            const photosJson = reviewPhotos.length > 0 ? JSON.stringify(reviewPhotos.map(p => p.url)) : null;\r\n            socket.emit('create-review', {\r\n                breedId: breedId,\r\n                text: newReview.trim() || '',\r\n                photos: photosJson\r\n            });\r\n            setNewReview('');\r\n            setReviewPhotos([]);\r\n            if (fileInputRef.current) {\r\n                fileInputRef.current.value = '';\r\n            }\r\n        } catch (error) {\r\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–∑—ã–≤–∞:', error);\r\n        }\r\n    };\r\n\r\n    const handleToggleReaction = async (reviewId, reaction) => {\r\n        if (!socket || !currentUser) return;\r\n\r\n        try {\r\n            socket.emit('toggle-review-reaction', {\r\n                reviewId: reviewId,\r\n                reaction: reaction\r\n            });\r\n            setShowReactionPicker(null);\r\n            setReactionInput('');\r\n        } catch (error) {\r\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ä–µ–∞–∫—Ü–∏–∏:', error);\r\n        }\r\n    };\r\n\r\n    const parsePhotos = (photosJson) => {\r\n        if (!photosJson) return [];\r\n        try {\r\n            return JSON.parse(photosJson);\r\n        } catch {\r\n            return [];\r\n        }\r\n    };\r\n\r\n    const formatTime = (dateString) => {\r\n        const date = new Date(dateString);\r\n        const now = new Date();\r\n        const diff = now - date;\r\n        const seconds = Math.floor(diff / 1000);\r\n        const minutes = Math.floor(diff / 60000);\r\n        const hours = Math.floor(diff / 3600000);\r\n        const days = Math.floor(diff / 86400000);\r\n\r\n        if (seconds < 10) return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';\r\n        if (seconds < 60) return `${seconds} —Å–µ–∫ –Ω–∞–∑–∞–¥`;\r\n        if (minutes < 60) return `${minutes} –º–∏–Ω –Ω–∞–∑–∞–¥`;\r\n        if (hours < 24) return `${hours} —á –Ω–∞–∑–∞–¥`;\r\n        if (days < 7) return `${days} –¥–Ω –Ω–∞–∑–∞–¥`;\r\n        \r\n        return date.toLocaleDateString('ru-RU', {\r\n            day: 'numeric',\r\n            month: 'short',\r\n            hour: '2-digit',\r\n            minute: '2-digit'\r\n        });\r\n    };\r\n\r\n    const hasUserReacted = (reviewId, reaction) => {\r\n        const reviewReactions = reactions[reviewId];\r\n        if (!reviewReactions || !reviewReactions[reaction]) return false;\r\n        return reviewReactions[reaction].some(user => user.id === currentUser?.id);\r\n    };\r\n\r\n    const handleStartEdit = (review) => {\r\n        setEditingReviewId(review.id);\r\n        setEditText(review.text || '');\r\n        const photosList = parsePhotos(review.photos);\r\n        setEditPhotos(photosList.map(url => ({ url })));\r\n        setShowReviewMenu(null);\r\n    };\r\n\r\n    const handleCancelEdit = () => {\r\n        setEditingReviewId(null);\r\n        setEditText('');\r\n        setEditPhotos([]);\r\n    };\r\n\r\n    const handleSaveEdit = async (reviewId) => {\r\n        if ((!editText.trim() && editPhotos.length === 0) || !socket) return;\r\n\r\n        try {\r\n            const photosJson = editPhotos.length > 0 ? JSON.stringify(editPhotos.map(p => p.url)) : null;\r\n            socket.emit('update-review', {\r\n                reviewId: reviewId,\r\n                text: editText.trim() || '',\r\n                photos: photosJson\r\n            });\r\n            setEditingReviewId(null);\r\n            setEditText('');\r\n            setEditPhotos([]);\r\n        } catch (error) {\r\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –æ—Ç–∑—ã–≤–∞:', error);\r\n        }\r\n    };\r\n\r\n    const handleDeleteReview = async (reviewId) => {\r\n        if (!window.confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –æ—Ç–∑—ã–≤?')) {\r\n            return;\r\n        }\r\n\r\n        if (!socket) return;\r\n\r\n        try {\r\n            socket.emit('delete-review', {\r\n                reviewId: reviewId,\r\n            });\r\n            setShowReviewMenu(null);\r\n        } catch (error) {\r\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ—Ç–∑—ã–≤–∞:', error);\r\n        }\r\n    };\r\n\r\n    const handleEditPhotoChange = async (e) => {\r\n        const files = Array.from(e.target.files);\r\n        if (files.length === 0) return;\r\n\r\n        try {\r\n            const uploadPromises = files.map(file => petsAPI.uploadFile(file));\r\n            const uploadedFiles = await Promise.all(uploadPromises);\r\n            setEditPhotos(prev => [...prev, ...uploadedFiles]);\r\n        } catch (error) {\r\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:', error);\r\n        }\r\n    };\r\n\r\n    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (showReviewMenu && !event.target.closest('.review-actions-wrapper')) {\r\n                setShowReviewMenu(null);\r\n            }\r\n            if (showReactionPicker && !event.target.closest('.review-reaction-controls')) {\r\n                setShowReactionPicker(null);\r\n            }\r\n        };\r\n\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, [showReviewMenu, showReactionPicker]);\r\n\r\n    if (loading) {\r\n        return <div className=\"breed-reviews-loading\">–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–∑—ã–≤–æ–≤...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"breed-reviews\">\r\n            {currentUser ? (\r\n                <form className=\"review-form\" onSubmit={handleSubmitReview}>\r\n                    <textarea\r\n                        className=\"review-input\"\r\n                        placeholder=\"–ù–∞–ø–∏—à–∏—Ç–µ –æ—Ç–∑—ã–≤ –æ –ø–æ—Ä–æ–¥–µ...\"\r\n                        value={newReview}\r\n                        onChange={(e) => setNewReview(e.target.value)}\r\n                        maxLength={2000}\r\n                    />\r\n                    <div className=\"review-form-actions\">\r\n                        <button\r\n                            type=\"button\"\r\n                            className=\"attach-photos-btn\"\r\n                            onClick={() => fileInputRef.current?.click()}\r\n                        >\r\n                            üì∑ –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ\r\n                        </button>\r\n                        <input\r\n                            ref={fileInputRef}\r\n                            type=\"file\"\r\n                            multiple\r\n                            accept=\"image/*\"\r\n                            style={{ display: 'none' }}\r\n                            onChange={handlePhotoChange}\r\n                        />\r\n                        {reviewPhotos.length > 0 && (\r\n                            <div className=\"review-photos-preview\">\r\n                                {reviewPhotos.map((photo, index) => (\r\n                                    <div key={index} className=\"photo-preview\">\r\n                                        <img src={photo.url.startsWith('http') ? photo.url : `http://localhost:5000${photo.url}`} alt=\"Preview\" />\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            onClick={() => setReviewPhotos(prev => prev.filter((_, i) => i !== index))}\r\n                                        >\r\n                                            √ó\r\n                                        </button>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                        <button\r\n                            type=\"submit\"\r\n                            className=\"submit-review-btn\"\r\n                            disabled={(!newReview.trim() && reviewPhotos.length === 0) || !socket}\r\n                        >\r\n                            –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            ) : (\r\n                <div className=\"review-login-prompt\">\r\n                    <p>–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</p>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"reviews-list\">\r\n                {reviews.length === 0 ? (\r\n                    <div className=\"reviews-empty\">\r\n                        <p>–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>\r\n                    </div>\r\n                ) : (\r\n                    reviews.map((review) => {\r\n                        const reviewPhotosList = parsePhotos(review.photos);\r\n                        return (\r\n                            <div key={review.id} className=\"review-item\">\r\n                                <div className=\"review-header\">\r\n                                    <div className=\"review-author-info\">\r\n                                        <div className=\"review-avatar\">\r\n                                            {review.user.avatar ? (\r\n                                                <img\r\n                                                    src={review.user.avatar.startsWith('http') \r\n                                                        ? review.user.avatar \r\n                                                        : `http://localhost:5000${review.user.avatar}`}\r\n                                                    alt={review.user.name}\r\n                                                />\r\n                                            ) : (\r\n                                                <div className=\"avatar-placeholder\">\r\n                                                    {review.user.name.charAt(0).toUpperCase()}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"review-author-details\">\r\n                                            <span className=\"review-author\">{review.user.name}</span>\r\n                                            <span className=\"review-time\">{formatTime(review.createdat)}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                {review.text && review.text.trim().length > 0 && (\r\n                                    <div className=\"review-text\">{review.text}</div>\r\n                                )}\r\n                                {reviewPhotosList.length > 0 && (\r\n                                    <div className=\"review-photos\">\r\n                                        {reviewPhotosList.map((photoUrl, index) => (\r\n                                            <img\r\n                                                key={index}\r\n                                                src={photoUrl.startsWith('http') ? photoUrl : `http://localhost:5000${photoUrl}`}\r\n                                                alt={`–§–æ—Ç–æ ${index + 1}`}\r\n                                                onClick={() => setImageModalUrl(photoUrl.startsWith('http') ? photoUrl : `http://localhost:5000${photoUrl}`)}\r\n                                            />\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                                \r\n                                {/* –†–µ–∞–∫—Ü–∏–∏ */}\r\n                                {reactions[review.id] && Object.keys(reactions[review.id]).length > 0 && (\r\n                                    <div className=\"review-reactions\">\r\n                                        {Object.entries(reactions[review.id]).map(([reaction, users]) => (\r\n                                            <button\r\n                                                key={reaction}\r\n                                                className={`reaction-button ${\r\n                                                    hasUserReacted(review.id, reaction) ? 'reacted' : ''\r\n                                                }`}\r\n                                                onClick={() => handleToggleReaction(review.id, reaction)}\r\n                                                title={users.map(u => u.name).join(', ')}\r\n                                            >\r\n                                                {reaction.startsWith('data:image') || reaction.startsWith('http') ? (\r\n                                                    <img src={reaction} alt=\"reaction\" className=\"reaction-image\" />\r\n                                                ) : (\r\n                                                    <span className=\"reaction-emoji\">{reaction}</span>\r\n                                                )}\r\n                                                <span className=\"reaction-count\">{users.length}</span>\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∞–∫—Ü–∏–∏ */}\r\n                                {currentUser && (\r\n                                    <div className=\"review-reaction-controls\">\r\n                                        <button\r\n                                            className=\"add-reaction-btn\"\r\n                                            onClick={() => setShowReactionPicker(\r\n                                                showReactionPicker === review.id ? null : review.id\r\n                                            )}\r\n                                        >\r\n                                            <span>+</span> –†–µ–∞–∫—Ü–∏—è\r\n                                        </button>\r\n                                        \r\n                                        {showReactionPicker === review.id && (\r\n                                            <div className=\"reaction-picker\">\r\n                                                <div className=\"reaction-picker-section\">\r\n                                                    <label>URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</label>\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        placeholder=\"–í—Å—Ç–∞–≤—å—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è\"\r\n                                                        value={reactionInput}\r\n                                                        onChange={(e) => setReactionInput(e.target.value)}\r\n                                                        onKeyPress={(e) => {\r\n                                                            if (e.key === 'Enter') {\r\n                                                                if (reactionInput.trim()) {\r\n                                                                    handleToggleReaction(review.id, reactionInput.trim());\r\n                                                                }\r\n                                                            }\r\n                                                        }}\r\n                                                    />\r\n                                                    <button\r\n                                                        onClick={() => {\r\n                                                            if (reactionInput.trim()) {\r\n                                                                handleToggleReaction(review.id, reactionInput.trim());\r\n                                                            }\r\n                                                        }}\r\n                                                        disabled={!reactionInput.trim()}\r\n                                                    >\r\n                                                        –î–æ–±–∞–≤–∏—Ç—å\r\n                                                    </button>\r\n                                                </div>\r\n                                                <div className=\"reaction-picker-divider\">–∏–ª–∏</div>\r\n                                                <div className=\"reaction-picker-section\">\r\n                                                    <label>–ë—ã—Å—Ç—Ä—ã–µ —ç–º–æ–¥–∑–∏:</label>\r\n                                                    <div className=\"quick-reactions\">\r\n                                                        {['üëç', '‚ù§Ô∏è', 'üòÇ', 'üòä', 'üòÆ', 'üò¢', 'üéâ', 'üî•'].map(emoji => (\r\n                                                            <button\r\n                                                                key={emoji}\r\n                                                                className=\"quick-reaction-btn\"\r\n                                                                onClick={() => handleToggleReaction(review.id, emoji)}\r\n                                                            >\r\n                                                                {emoji}\r\n                                                            </button>\r\n                                                        ))}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    })\r\n                )}\r\n            </div>\r\n\r\n            {imageModalUrl && (\r\n                <div className=\"review-image-modal\" onClick={() => setImageModalUrl(null)}>\r\n                    <div className=\"review-image-modal-content\" onClick={(e) => e.stopPropagation()}>\r\n                        <button\r\n                            className=\"review-image-modal-close\"\r\n                            onClick={() => setImageModalUrl(null)}\r\n                        >\r\n                            √ó\r\n                        </button>\r\n                        <img src={imageModalUrl} alt=\"–ü—Ä–æ—Å–º–æ—Ç—Ä\" />\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BreedReviews;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}